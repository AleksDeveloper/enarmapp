"use strict";(self.webpackChunkenarmapp=self.webpackChunkenarmapp||[]).push([[593],{9593:(gt,V,g)=>{g.r(V),g.d(V,{AdminModule:()=>pt});var u=g(6895),a=g(433),y=g(1086),c=g(5861),Q=g(7757),e=g(4650),b=g(2340),M=g(529);let A=(()=>{class o{constructor(t){this.httpclient=t}getUsers(){return new Promise((t,i)=>{this.httpclient.get(`${b.T}/enarm-students`).subscribe(n=>{t(n)},i)})}getUserTypes(){return new Promise((t,i)=>{this.httpclient.get(`${b.T}/others/student-type`).subscribe(n=>{t(n)},i)})}getSusbcriptions(){return new Promise((t,i)=>{this.httpclient.get(`${b.T}/others/subscripciones`).subscribe(n=>{t(n)},i)})}updateUser(t){return new Promise((i,n)=>{this.httpclient.put(`${b.T}/enarm-students/upload-profile`,t).subscribe(r=>{i(r)},n)})}resetPassword(t){return new Promise((i,n)=>{this.httpclient.put(`${b.T}/auth/reset-password`,{id:t}).subscribe(r=>{i(r)},n)})}updateSubscription(t){return new Promise((i,n)=>{this.httpclient.put(`${b.T}/others/subscription`,t).subscribe(r=>{i(r)},n)})}getAllConfigurations(){return new Promise((t,i)=>{this.httpclient.get(`${b.T}/others/configuration-all`).subscribe(n=>{t(n)},i)})}updateConfigurations(t){return new Promise((i,n)=>{this.httpclient.put(`${b.T}/others/configuration`,t).subscribe(r=>{i(r)},n)})}getLaboratories(){return new Promise((t,i)=>{this.httpclient.get(`${b.T}/others/laboratory`).subscribe(n=>{t(n)},i)})}getCategories(){return new Promise((t,i)=>{this.httpclient.get(`${b.T}/questions/categories`).subscribe(n=>{t(n.response)},i)})}addCategory(t){return new Promise((i,n)=>{this.httpclient.post(`${b.T}/questions/add-category`,t).subscribe(r=>{i(r)},n)})}addSubCategory(t){return new Promise((i,n)=>{this.httpclient.post(`${b.T}/questions/add-subcategory`,t).subscribe(r=>{i(r)},n)})}editSubCategory(t){return new Promise((i,n)=>{this.httpclient.put(`${b.T}/questions/edit-subcategory`,t).subscribe(r=>{i(r)},n)})}}return o.\u0275fac=function(t){return new(t||o)(e.LFG(M.eN))},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();var U=g(8424),E=g(464);function ie(o,s){1&o&&(e.TgZ(0,"span",11),e._UZ(1,"i-bs",12),e.qZA())}function oe(o,s){1&o&&(e.TgZ(0,"span",11),e._UZ(1,"i-bs",12),e.qZA())}function ne(o,s){1&o&&(e.TgZ(0,"span",11),e._UZ(1,"i-bs",12),e.qZA())}function re(o,s){1&o&&(e.TgZ(0,"span",11),e._UZ(1,"i-bs",12),e.qZA())}function se(o,s){1&o&&(e.TgZ(0,"span",11),e._UZ(1,"i-bs",12),e.qZA())}function ae(o,s){1&o&&(e.TgZ(0,"span",11),e._UZ(1,"i-bs",12),e.qZA())}let w=(()=>{class o{constructor(t){this.router=t,this.current="usuarios"}ngOnInit(){return(0,c.Z)(function*(){})()}go(){switch(this.current){case"usuarios":this.router.navigate(["/admin"]);break;case"subscripciones":this.router.navigate(["/admin/subscripciones"]);break;case"configurations":this.router.navigate(["/admin/configurations"]);break;case"laboratory":this.router.navigate(["/admin/laboratory"]);break;case"categories":this.router.navigate(["/admin/categories"]);break;case"questions":this.router.navigate(["/admin/questions"])}}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(y.F0))},o.\u0275cmp=e.Xpm({type:o,selectors:[["enarm-admin-menu"]],inputs:{current:"current"},decls:34,vars:6,consts:[[1,"navbar","navbar-expand-lg","navbar-light","bg-light","px-4"],["href","#",1,"navbar-brand"],["type","button","data-toggle","collapse","data-target","#navbarNav","aria-controls","navbarNav","aria-expanded","false","aria-label","Toggle navigation",1,"navbar-toggler"],[1,"navbar-toggler-icon"],["id","navbarNav",1,"collapse","navbar-collapse"],[1,"navbar-nav"],[1,"nav-item","active"],["role","button",1,"nav-link",3,"click"],["class","sr-only",4,"ngIf"],[1,"nav-item"],["role","button",1,"nav-link"],[1,"sr-only"],["name","award","width","20","height","20",2,"color","blue"]],template:function(t,i){1&t&&(e.TgZ(0,"nav",0)(1,"a",1),e._uU(2,"Ernarm Admin"),e.qZA(),e.TgZ(3,"button",2),e._UZ(4,"span",3),e.qZA(),e.TgZ(5,"div",4)(6,"ul",5)(7,"li",6)(8,"a",7),e.NdJ("click",function(){return i.current="usuarios",i.go()}),e._uU(9,"Usuarios "),e.YNc(10,ie,2,0,"span",8),e.qZA()(),e.TgZ(11,"li",9)(12,"a",7),e.NdJ("click",function(){return i.current="questions",i.go()}),e._uU(13,"Casos clinicos"),e.YNc(14,oe,2,0,"span",8),e.qZA()(),e.TgZ(15,"li",9)(16,"a",7),e.NdJ("click",function(){return i.current="categories",i.go()}),e._uU(17,"Categorias"),e.YNc(18,ne,2,0,"span",8),e.qZA()(),e.TgZ(19,"li",9)(20,"a",7),e.NdJ("click",function(){return i.current="configurations",i.go()}),e._uU(21,"Configuraciones"),e.YNc(22,re,2,0,"span",8),e.qZA()(),e.TgZ(23,"li",9)(24,"a",7),e.NdJ("click",function(){return i.current="subscripciones",i.go()}),e._uU(25,"Subscripciones"),e.YNc(26,se,2,0,"span",8),e.qZA()(),e.TgZ(27,"li",9)(28,"a",7),e.NdJ("click",function(){return i.current="laboratory",i.go()}),e._uU(29,"Laboratorios"),e.YNc(30,ae,2,0,"span",8),e.qZA()(),e.TgZ(31,"li",9)(32,"a",10),e._uU(33,"Cerrar sesion"),e.qZA()()()()()),2&t&&(e.xp6(10),e.Q6J("ngIf","usuarios"===i.current),e.xp6(4),e.Q6J("ngIf","questions"===i.current),e.xp6(4),e.Q6J("ngIf","categories"===i.current),e.xp6(4),e.Q6J("ngIf","configurations"===i.current),e.xp6(4),e.Q6J("ngIf","subscripciones"===i.current),e.xp6(4),e.Q6J("ngIf","laboratory"===i.current))},dependencies:[u.O5,E.gZH]}),o})();const le=["myModalClose"];function ue(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"tr")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td",41),e._uU(6),e.qZA(),e.TgZ(7,"td",41),e._uU(8),e.qZA(),e.TgZ(9,"td",41),e._uU(10),e.qZA(),e.TgZ(11,"td"),e._uU(12),e.qZA(),e.TgZ(13,"td"),e._uU(14),e.qZA(),e.TgZ(15,"td")(16,"button",42),e.NdJ("click",function(){const r=e.CHM(t).$implicit,l=e.oxw();return e.KtG(l.setValuesForm(r))}),e._uU(17,"Editar"),e.qZA()()()}if(2&o){const t=s.$implicit;e.xp6(2),e.Oqu(t.id),e.xp6(2),e.Oqu(t.email),e.xp6(2),e.Oqu(t.nombres),e.xp6(2),e.Oqu(t.apellidos),e.xp6(2),e.Oqu(t.tipo),e.xp6(2),e.Oqu(t.suscripcion),e.xp6(2),e.Oqu(t.estatusString)}}function de(o,s){1&o&&(e.TgZ(0,"div",43),e._UZ(1,"div",44),e.qZA())}function ce(o,s){if(1&o&&(e.TgZ(0,"option",31)(1,"span")(2,"b"),e._uU(3),e.ALo(4,"titlecase"),e.qZA(),e._uU(5," Duracion "),e.TgZ(6,"b"),e._uU(7),e.qZA(),e._uU(8," Costo "),e.TgZ(9,"b"),e._uU(10),e.qZA()()()),2&o){const t=s.$implicit;e.Q6J("value",t.id),e.xp6(3),e.Oqu(e.lcZ(4,4,t.descripcion)),e.xp6(4),e.hij("",t.duracionMes," mes"),e.xp6(3),e.hij("",t.costo," pesos")}}function me(o,s){if(1&o&&(e.TgZ(0,"option",31)(1,"span")(2,"b"),e._uU(3),e.ALo(4,"titlecase"),e.qZA()()()),2&o){const t=s.$implicit;e.Q6J("value",t.id),e.xp6(3),e.Oqu(e.lcZ(4,2,t.tipo))}}function pe(o,s){if(1&o&&(e.TgZ(0,"h2",48),e._uU(1,"Listo! la nueva contrase\xf1a es.- "),e.TgZ(2,"b"),e._uU(3),e.qZA()()),2&o){const t=e.oxw(2);e.xp6(3),e.Oqu(null==t.responsePassword?null:t.responsePassword.randomstring)}}function ge(o,s){1&o&&e._UZ(0,"div",52)}function fe(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"div",45)(1,"div",46)(2,"h1",47),e._uU(3,"Estas seguro?"),e.qZA(),e.TgZ(4,"h2",48),e._uU(5,"Esta accion creara una contrase\xf1a nueva al usuario "),e.qZA(),e.YNc(6,pe,4,1,"h2",49),e.YNc(7,ge,1,0,"div",50),e.TgZ(8,"a",51),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.resetPasswordFunc())}),e._uU(9),e.qZA(),e.TgZ(10,"a",51),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.resetPassword=!1)}),e._uU(11,"Cancelar"),e.qZA()()()}if(2&o){const t=e.oxw();e.xp6(6),e.Q6J("ngIf",t.responsePassword),e.xp6(1),e.Q6J("ngIf",t.loadingPassword),e.xp6(2),e.Oqu(t.responsePassword?"Reintentar":"Aceptar")}}const Y=function(o){return{show:o}},S=function(o){return{"opacity-25":o}};let he=(()=>{class o{constructor(t){this.adminService=t,this.isLoadingModal=!1,this.error=!1,this.resultSave=!1,this.resetPassword=!1,this.loadingPassword=!1,this.isLoading=!0,this.profileForm=new a.cw({apellidos:new a.NI(""),cumpleanos:new a.NI(""),email:new a.NI({value:"",disabled:!0}),estatus:new a.NI(0),idSuscripcion:new a.NI(0),idTipoUsuario:new a.NI(0),nombres:new a.NI("")})}ngOnInit(){var t=this;return(0,c.Z)(function*(){yield t.getUsers(),yield t.getUserTypes(),yield t.getSusbcriptions();for(const i of t.users.data){const n=t.userType.find(m=>m.id===i.idTipoUsuario);i.tipo=n?.tipo;let r="";switch(i.estatus){case Q.Q.CURRENT:r="Corriente";break;case Q.Q.EXPIRE:r="Vencido";break;case Q.Q.NEW:r="Nuevo";break;case Q.Q.TRY:r="Prueba";break;case Q.Q.DELETE:r="Eliminado";break;default:r="Desconocido"}const l=t.subscriptions.find(m=>m.id===i.idSuscripcion)?.descripcion;i.suscripcion=l||"Desconocido",i.estatusString=r}t.usersClone=[...t.users.data],t.isLoading=!1})()}setValuesForm(t){this.selectedUser=t,this.profileForm.patchValue({apellidos:t.apellidos,cumpleanos:t.cumpleanos,email:t.email,estatus:t.estatus,idSuscripcion:t.idSuscripcion,idTipoUsuario:t.idTipoUsuario,nombres:t.nombres})}onSubmit(){var t=this;return(0,c.Z)(function*(){if(t.isLoadingModal)return;if(t.profileForm.invalid)return void(t.error=!0);t.isLoadingModal=!0;const i={id:t.selectedUser.id,apellidos:t.profileForm.value.apellidos,cumpleanos:t.profileForm.value.cumpleanos,email:t.profileForm.value.email,estatus:t.profileForm.value.estatus===t.selectedUser.estatus?null:t.profileForm.value.estatus,idSuscripcion:t.profileForm.value.idSuscripcion,idTipoUsuario:t.profileForm.value.idTipoUsuario,nombres:t.profileForm.value.nombres};try{yield t.adminService.updateUser(i),t.resultSave=!0,t.isLoading=!0,t.isLoadingModal=!1,t.ngOnInit(),t.modalClose.nativeElement.click(),t.resetPassword=!1}catch(n){console.log("error",n),t.isLoadingModal=!1}})()}getUsers(){var t=this;return(0,c.Z)(function*(){t.users=yield t.adminService.getUsers()})()}getUserTypes(){var t=this;return(0,c.Z)(function*(){t.userType=yield t.adminService.getUserTypes()})()}getSusbcriptions(){var t=this;return(0,c.Z)(function*(){t.subscriptions=yield t.adminService.getSusbcriptions()})()}filter(t){if(t.target.value.length<=3)return void(this.users.data=this.usersClone);const i=this.usersClone.filter(n=>n.nombres.toLowerCase().includes(t.target.value.toLowerCase())||n.apellidos.toLowerCase().includes(t.target.value.toLowerCase())||n.email.toLowerCase().includes(t.target.value.toLowerCase())||n.tipo.toLowerCase().includes(t.target.value.toLowerCase())||n.suscripcion.toLowerCase().includes(t.target.value.toLowerCase())|n.estatusString.toLowerCase().includes(t.target.value.toLowerCase()));this.users.data=i}resetPasswordFunc(){var t=this;return(0,c.Z)(function*(){t.loadingPassword=!0;try{t.responsePassword=yield t.adminService.resetPassword(t.selectedUser.id),t.loadingPassword=!1}catch(i){console.log("error",i),t.loadingPassword=!1}})()}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(A))},o.\u0275cmp=e.Xpm({type:o,selectors:[["ng-component"]],viewQuery:function(t,i){if(1&t&&e.Gf(le,5),2&t){let n;e.iGM(n=e.CRH())&&(i.modalClose=n.first)}},decls:102,vars:27,consts:[[1,"container-fluid"],[3,"isLoading"],[1,"h3","mt-5"],[1,"input-group","mb-3"],[1,"input-group-prepend"],["id","basic-addon1",1,"input-group-text"],["type","text","aria-label","Username","aria-describedby","basic-addon1",1,"form-control",3,"keypress"],[1,"row"],[1,"col-12"],[1,"table","table-striped"],["scope","col"],[4,"ngFor","ngForOf"],["id","exampleModal","tabindex","-1","aria-labelledby","exampleModalLabel","aria-hidden","true",1,"modal","fade"],["role","alert","aria-live","assertive","aria-atomic","true",1,"toast","align-items-center","text-white","bg-danger","border-0",2,"position","absolute","top","4%","right","5%",3,"ngClass"],[1,"d-flex"],[1,"toast-body"],["type","button","data-bs-dismiss","toast","aria-label","Close",1,"btn-close","btn-close-white","me-2","m-auto",3,"click"],[3,"formGroup","ngSubmit"],[1,"modal-dialog"],["style","position: absolute; margin: 50%; z-index: 99;","class","d-flex justify-content-center",4,"ngIf"],[1,"modal-content"],[1,"modal-header",3,"ngClass"],["id","exampleModalLabel",1,"modal-title","fs-5"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],["myModalClose",""],[1,"modal-body",3,"ngClass"],["type","text","aria-label","Username","aria-describedby","basic-addon1","formControlName","nombres","required","",1,"form-control"],["type","text","aria-label","Username","aria-describedby","basic-addon1","formControlName","apellidos","required","",1,"form-control"],["type","text","aria-label","Username","aria-describedby","basic-addon1","formControlName","email","readonly","",1,"form-control"],["type","number","aria-label","Username","aria-describedby","basic-addon1","formControlName","cumpleanos","required","",1,"form-control"],["formControlName","estatus","aria-label","","required","",1,"form-select"],[3,"value"],["formControlName","idSuscripcion","aria-label","","required","",1,"form-select"],[3,"value",4,"ngFor","ngForOf"],["formControlName","idTipoUsuario","aria-label","","required","",1,"form-select"],["class","card",4,"ngIf"],[1,"modal-footer",3,"ngClass"],["type","button","data-bs-dismiss","modal",1,"btn","btn-secondary",3,"click"],["type","submit",1,"btn","btn-primary"],["type","button",1,"btn","btn-danger",3,"click"],["role","alert","aria-live","assertive","aria-atomic","true",1,"toast","align-items-center","text-white","bg-success","border-0",2,"position","absolute","top","4%","right","5%",3,"ngClass"],[1,"col-2","text-truncate"],["type","button","data-bs-toggle","modal","data-bs-target","#exampleModal",1,"btn","btn-primary",3,"click"],[1,"d-flex","justify-content-center",2,"position","absolute","margin","50%","z-index","99"],["role","status",1,"spinner-border"],[1,"card"],[1,"card-body"],[1,"h5","text-danger"],[1,"h6","mb-2","text-muted"],["class","h6 mb-2 text-muted",4,"ngIf"],["class","spinner-border text-success","role","status",4,"ngIf"],["role","button",1,"card-link",3,"click"],["role","status",1,"spinner-border","text-success"]],template:function(t,i){1&t&&(e._UZ(0,"enarm-admin-menu"),e.TgZ(1,"div",0)(2,"enarm-loading-outlet",1)(3,"p",2),e._uU(4,"Usuarios"),e.qZA(),e.TgZ(5,"div",3)(6,"div",4)(7,"span",5),e._uU(8,"Filtrar"),e.qZA()(),e.TgZ(9,"input",6),e.NdJ("keypress",function(r){return i.filter(r)}),e.qZA()(),e.TgZ(10,"div",7)(11,"div",8)(12,"table",9)(13,"thead")(14,"tr")(15,"th",10),e._uU(16,"id"),e.qZA(),e.TgZ(17,"th",10),e._uU(18,"Email"),e.qZA(),e.TgZ(19,"th",10),e._uU(20,"Nombres"),e.qZA(),e.TgZ(21,"th",10),e._uU(22,"Apellidos"),e.qZA(),e.TgZ(23,"th",10),e._uU(24,"Usuario"),e.qZA(),e.TgZ(25,"th",10),e._uU(26,"Subscripcion"),e.qZA(),e.TgZ(27,"th",10),e._uU(28,"Cuenta"),e.qZA(),e.TgZ(29,"th",10),e._uU(30,"Actions"),e.qZA()()(),e.TgZ(31,"tbody"),e.YNc(32,ue,18,7,"tr",11),e.qZA()()()()()(),e.TgZ(33,"div",12)(34,"div",13)(35,"div",14)(36,"div",15),e._uU(37," Falta informacion por llenar "),e.qZA(),e.TgZ(38,"button",16),e.NdJ("click",function(){return i.error=!1}),e.qZA()()(),e.TgZ(39,"form",17),e.NdJ("ngSubmit",function(){return i.onSubmit()}),e.TgZ(40,"div",18),e.YNc(41,de,2,0,"div",19),e.TgZ(42,"div",20)(43,"div",21)(44,"h1",22),e._uU(45,"Edicion de Usuario"),e.qZA(),e._UZ(46,"button",23,24),e.qZA(),e.TgZ(48,"div",25)(49,"div",3)(50,"span",5),e._uU(51,"Nombre*"),e.qZA(),e._UZ(52,"input",26),e.qZA(),e.TgZ(53,"div",3)(54,"span",5),e._uU(55,"Apellidos*"),e.qZA(),e._UZ(56,"input",27),e.qZA(),e.TgZ(57,"div",3)(58,"span",5),e._uU(59,"Email"),e.qZA(),e._UZ(60,"input",28),e.qZA(),e.TgZ(61,"div",3)(62,"span",5),e._uU(63,"Edad*"),e.qZA(),e._UZ(64,"input",29),e.qZA(),e.TgZ(65,"div",3)(66,"span",5),e._uU(67,"Estatus de la cuenta*"),e.qZA(),e.TgZ(68,"select",30)(69,"option",31),e._uU(70,"Eliminado"),e.qZA(),e.TgZ(71,"option",31),e._uU(72,"Vencido"),e.qZA(),e.TgZ(73,"option",31),e._uU(74,"Nuevo"),e.qZA(),e.TgZ(75,"option",31),e._uU(76,"Corriente"),e.qZA(),e.TgZ(77,"option",31),e._uU(78,"Prueba"),e.qZA()()(),e.TgZ(79,"div",3)(80,"span",5),e._uU(81,"Subscripcion*"),e.qZA(),e.TgZ(82,"select",32),e.YNc(83,ce,11,6,"option",33),e.qZA()(),e.TgZ(84,"div",3)(85,"span",5),e._uU(86,"Tipo de usuario*"),e.qZA(),e.TgZ(87,"select",34),e.YNc(88,me,5,4,"option",33),e.qZA()(),e.YNc(89,fe,12,3,"div",35),e.qZA(),e.TgZ(90,"div",36)(91,"button",37),e.NdJ("click",function(){return i.resetPassword=!1}),e._uU(92,"Cerrar"),e.qZA(),e.TgZ(93,"button",38),e._uU(94,"Guardar Cambios"),e.qZA(),e.TgZ(95,"button",39),e.NdJ("click",function(){return i.resetPassword=!0}),e._uU(96,"Restablecer Contrase\xf1a"),e.qZA()()()()()(),e.TgZ(97,"div",40)(98,"div",14)(99,"div",15),e._uU(100," Datos guardados exitosamente "),e.qZA(),e.TgZ(101,"button",16),e.NdJ("click",function(){return i.resultSave=!1}),e.qZA()()()),2&t&&(e.xp6(2),e.Q6J("isLoading",i.isLoading),e.xp6(30),e.Q6J("ngForOf",null==i.users?null:i.users.data),e.xp6(2),e.Q6J("ngClass",e.VKq(17,Y,i.error)),e.xp6(5),e.Q6J("formGroup",i.profileForm),e.xp6(2),e.Q6J("ngIf",i.isLoadingModal),e.xp6(2),e.Q6J("ngClass",e.VKq(19,S,i.isLoadingModal)),e.xp6(5),e.Q6J("ngClass",e.VKq(21,S,i.isLoadingModal)),e.xp6(21),e.Q6J("value",88),e.xp6(2),e.Q6J("value",99),e.xp6(2),e.Q6J("value",0),e.xp6(2),e.Q6J("value",1),e.xp6(2),e.Q6J("value",3),e.xp6(6),e.Q6J("ngForOf",i.subscriptions),e.xp6(5),e.Q6J("ngForOf",i.userType),e.xp6(1),e.Q6J("ngIf",i.resetPassword),e.xp6(1),e.Q6J("ngClass",e.VKq(23,S,i.isLoadingModal)),e.xp6(7),e.Q6J("ngClass",e.VKq(25,Y,i.resultSave)))},dependencies:[u.mk,u.sg,u.O5,a._Y,a.YN,a.Kr,a.Fj,a.wV,a.EJ,a.JJ,a.JL,a.Q7,a.sg,a.u,U.N,w,u.rS]}),o})();const be=["myModalClose"];function _e(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"tr")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td",37),e._uU(6),e.qZA(),e.TgZ(7,"td",37),e._uU(8),e.qZA(),e.TgZ(9,"td"),e._uU(10),e.qZA(),e.TgZ(11,"td"),e._uU(12),e.qZA(),e.TgZ(13,"td")(14,"button",8),e.NdJ("click",function(){const r=e.CHM(t).$implicit,l=e.oxw();return e.KtG(l.setValuesForm(r))}),e._uU(15,"Editar"),e.qZA()()()}if(2&o){const t=s.$implicit;e.xp6(2),e.Oqu(t.id),e.xp6(2),e.Oqu(t.codigo),e.xp6(2),e.Oqu(t.descripcion),e.xp6(2),e.Oqu(t.grupo),e.xp6(2),e.Oqu(t.tipo),e.xp6(2),e.Oqu(t.valor)}}function Ce(o,s){1&o&&(e.TgZ(0,"div",38),e._UZ(1,"div",39),e.qZA())}const D=function(o){return{show:o}},F=function(o){return{"opacity-25":o}};let ve=(()=>{class o{constructor(t){this.adminService=t,this.isLoadingModal=!1,this.error=!1,this.resultSave=!1,this.isLoading=!0,this.profileForm=new a.cw({codigo:new a.NI(""),descripcion:new a.NI(""),grupo:new a.NI(""),tipo:new a.NI(""),valor:new a.NI("")})}ngOnInit(){var t=this;return(0,c.Z)(function*(){yield t.getConfigurations(),t.configurationsClone=[...t.configurations],t.isLoading=!1})()}setValuesForm(t){this.selectedUser=t||{},t?this.profileForm.patchValue({codigo:t.codigo,descripcion:t.descripcion,grupo:t.grupo,tipo:t.tipo,valor:t.valor}):this.profileForm.reset()}onSubmit(){var t=this;return(0,c.Z)(function*(){if(t.isLoadingModal)return;if(t.profileForm.invalid)return void(t.error=!0);t.isLoadingModal=!0;const i={id:t.selectedUser.id,codigo:t.profileForm.value.codigo,descripcion:t.profileForm.value.descripcion,grupo:t.profileForm.value.grupo,tipo:t.profileForm.value.tipo,valor:t.profileForm.value.valor};try{yield t.adminService.updateConfigurations(i),t.resultSave=!0,t.isLoading=!0,t.isLoadingModal=!1,t.ngOnInit(),t.modalClose.nativeElement.click()}catch(n){console.log("error",n),t.isLoadingModal=!1}})()}getConfigurations(){var t=this;return(0,c.Z)(function*(){t.configurations=yield t.adminService.getAllConfigurations()})()}filter(t){if(t.target.value.length<=3)return void(this.configurations=this.configurationsClone);const i=this.configurationsClone.filter(n=>n.codigo.toLowerCase().includes(t.target.value.toLowerCase())||n.grupo.toLowerCase().includes(t.target.value.toLowerCase())||n.tipo.toLowerCase().includes(t.target.value.toLowerCase())||n.tipo.toLowerCase().includes(t.target.value.toLowerCase())||n.descripcion.toLowerCase().includes(t.target.value.toLowerCase())||n.valor.toLowerCase().includes(t.target.value.toLowerCase()));this.configurations=i}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(A))},o.\u0275cmp=e.Xpm({type:o,selectors:[["ng-component"]],viewQuery:function(t,i){if(1&t&&e.Gf(be,5),2&t){let n;e.iGM(n=e.CRH())&&(i.modalClose=n.first)}},decls:79,vars:19,consts:[["current","configurations"],[1,"container-fluid"],[3,"isLoading"],[1,"h3","mt-5"],[1,"input-group","mb-3"],[1,"input-group-prepend"],["id","basic-addon1",1,"input-group-text"],["type","text","aria-label","Username","aria-describedby","basic-addon1",1,"form-control",3,"keypress"],["type","button","data-bs-toggle","modal","data-bs-target","#exampleModal",1,"btn","btn-primary",3,"click"],[1,"row"],[1,"col-12"],[1,"table","table-striped"],["scope","col"],[4,"ngFor","ngForOf"],["id","exampleModal","tabindex","-1","aria-labelledby","exampleModalLabel","aria-hidden","true",1,"modal","fade"],["role","alert","aria-live","assertive","aria-atomic","true",1,"toast","align-items-center","text-white","bg-danger","border-0",2,"position","absolute","top","4%","right","5%",3,"ngClass"],[1,"d-flex"],[1,"toast-body"],["type","button","data-bs-dismiss","toast","aria-label","Close",1,"btn-close","btn-close-white","me-2","m-auto",3,"click"],[3,"formGroup","ngSubmit"],[1,"modal-dialog"],["style","position: absolute; margin: 50%; z-index: 99;","class","d-flex justify-content-center",4,"ngIf"],[1,"modal-content"],[1,"modal-header",3,"ngClass"],["id","exampleModalLabel",1,"modal-title","fs-5"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],["myModalClose",""],[1,"modal-body",3,"ngClass"],["type","text","aria-label","Username","aria-describedby","basic-addon1","formControlName","codigo","required","",1,"form-control"],["type","text","aria-label","Username","aria-describedby","basic-addon1","formControlName","descripcion","required","",1,"form-control"],["type","text","aria-label","Username","aria-describedby","basic-addon1","formControlName","grupo","required","",1,"form-control"],["type","text","aria-label","Username","aria-describedby","basic-addon1","formControlName","tipo","required","",1,"form-control"],["type","text","aria-label","Username","aria-describedby","basic-addon1","formControlName","valor","required","",1,"form-control"],[1,"modal-footer",3,"ngClass"],["type","button","data-bs-dismiss","modal",1,"btn","btn-secondary"],["type","submit",1,"btn","btn-primary"],["role","alert","aria-live","assertive","aria-atomic","true",1,"toast","align-items-center","text-white","bg-success","border-0",2,"position","absolute","top","4%","right","5%",3,"ngClass"],[1,"col-2","text-truncate"],[1,"d-flex","justify-content-center",2,"position","absolute","margin","50%","z-index","99"],["role","status",1,"spinner-border"]],template:function(t,i){1&t&&(e._UZ(0,"enarm-admin-menu",0),e.TgZ(1,"div",1)(2,"enarm-loading-outlet",2)(3,"p",3),e._uU(4,"Configuraciones"),e.qZA(),e.TgZ(5,"div",4)(6,"div",5)(7,"span",6),e._uU(8,"Filtrar"),e.qZA()(),e.TgZ(9,"input",7),e.NdJ("keypress",function(r){return i.filter(r)}),e.qZA(),e.TgZ(10,"button",8),e.NdJ("click",function(){return i.setValuesForm()}),e._uU(11,"A\xf1adir Configuracion"),e.qZA()(),e.TgZ(12,"div",9)(13,"div",10)(14,"table",11)(15,"thead")(16,"tr")(17,"th",12),e._uU(18,"id"),e.qZA(),e.TgZ(19,"th",12),e._uU(20,"Codigo"),e.qZA(),e.TgZ(21,"th",12),e._uU(22,"Descripcion"),e.qZA(),e.TgZ(23,"th",12),e._uU(24,"Grupo"),e.qZA(),e.TgZ(25,"th",12),e._uU(26,"Tipo"),e.qZA(),e.TgZ(27,"th",12),e._uU(28,"Valor"),e.qZA(),e.TgZ(29,"th",12),e._uU(30,"Actions"),e.qZA()()(),e.TgZ(31,"tbody"),e.YNc(32,_e,16,6,"tr",13),e.qZA()()()()()(),e.TgZ(33,"div",14)(34,"div",15)(35,"div",16)(36,"div",17),e._uU(37," Falta informacion por llenar "),e.qZA(),e.TgZ(38,"button",18),e.NdJ("click",function(){return i.error=!1}),e.qZA()()(),e.TgZ(39,"form",19),e.NdJ("ngSubmit",function(){return i.onSubmit()}),e.TgZ(40,"div",20),e.YNc(41,Ce,2,0,"div",21),e.TgZ(42,"div",22)(43,"div",23)(44,"h1",24),e._uU(45,"Edicion de Usuario"),e.qZA(),e._UZ(46,"button",25,26),e.qZA(),e.TgZ(48,"div",27)(49,"div",4)(50,"span",6),e._uU(51,"Codigo*"),e.qZA(),e._UZ(52,"input",28),e.qZA(),e.TgZ(53,"div",4)(54,"span",6),e._uU(55,"Descripcion*"),e.qZA(),e._UZ(56,"input",29),e.qZA(),e.TgZ(57,"div",4)(58,"span",6),e._uU(59,"Grupo*"),e.qZA(),e._UZ(60,"input",30),e.qZA(),e.TgZ(61,"div",4)(62,"span",6),e._uU(63,"Tipo*"),e.qZA(),e._UZ(64,"input",31),e.qZA(),e.TgZ(65,"div",4)(66,"span",6),e._uU(67,"Valor*"),e.qZA(),e._UZ(68,"input",32),e.qZA()(),e.TgZ(69,"div",33)(70,"button",34),e._uU(71,"Cerrar"),e.qZA(),e.TgZ(72,"button",35),e._uU(73,"Guardar Cambios"),e.qZA()()()()()(),e.TgZ(74,"div",36)(75,"div",16)(76,"div",17),e._uU(77," Datos guardados exitosamente "),e.qZA(),e.TgZ(78,"button",18),e.NdJ("click",function(){return i.resultSave=!1}),e.qZA()()()),2&t&&(e.xp6(2),e.Q6J("isLoading",i.isLoading),e.xp6(30),e.Q6J("ngForOf",i.configurations),e.xp6(2),e.Q6J("ngClass",e.VKq(9,D,i.error)),e.xp6(5),e.Q6J("formGroup",i.profileForm),e.xp6(2),e.Q6J("ngIf",i.isLoadingModal),e.xp6(2),e.Q6J("ngClass",e.VKq(11,F,i.isLoadingModal)),e.xp6(5),e.Q6J("ngClass",e.VKq(13,F,i.isLoadingModal)),e.xp6(21),e.Q6J("ngClass",e.VKq(15,F,i.isLoadingModal)),e.xp6(5),e.Q6J("ngClass",e.VKq(17,D,i.resultSave)))},dependencies:[u.mk,u.sg,u.O5,a._Y,a.Fj,a.JJ,a.JL,a.Q7,a.sg,a.u,U.N,w]}),o})();const Ze=["myModalClose"];function qe(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"tr")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td",39),e._uU(6),e.qZA(),e.TgZ(7,"td",39),e._uU(8),e.qZA(),e.TgZ(9,"td")(10,"button",8),e.NdJ("click",function(){const r=e.CHM(t).$implicit,l=e.oxw(2);return e.KtG(l.setValuesForm(r))}),e._uU(11,"Editar"),e.qZA()()()}if(2&o){const t=s.$implicit;e.xp6(2),e.Oqu(t.id),e.xp6(2),e.Oqu(t.name),e.xp6(2),e.Oqu(t.ejemplo),e.xp6(2),e.Oqu(t.valor)}}function Te(o,s){if(1&o&&(e.TgZ(0,"div",32)(1,"div",33)(2,"div",34),e._uU(3),e.qZA(),e.TgZ(4,"div",35)(5,"table",36)(6,"thead")(7,"tr")(8,"th",37),e._uU(9,"ID"),e.qZA(),e.TgZ(10,"th",37),e._uU(11,"Nombre"),e.qZA(),e.TgZ(12,"th",37),e._uU(13,"Ejemplo"),e.qZA(),e.TgZ(14,"th",37),e._uU(15,"Valor"),e.qZA()()(),e.TgZ(16,"tbody"),e.YNc(17,qe,12,4,"tr",38),e.qZA()()()()()),2&o){const t=s.$implicit;e.xp6(3),e.Oqu(t.name),e.xp6(14),e.Q6J("ngForOf",t.subcategories)}}function ye(o,s){1&o&&(e.TgZ(0,"div",40),e._UZ(1,"div",41),e.qZA())}const P=function(o){return{show:o}},N=function(o){return{"opacity-25":o}};let Ae=(()=>{class o{constructor(t){this.adminService=t,this.isLoadingModal=!1,this.error=!1,this.resultSave=!1,this.isLoading=!0,this.profileForm=new a.cw({ejemplo:new a.NI(""),name:new a.NI(""),valor:new a.NI("")})}ngOnInit(){var t=this;return(0,c.Z)(function*(){yield t.getLaboratories(),t.laboratoryClone=[...t.laboratory],t.isLoading=!1})()}setValuesForm(t){this.selectedLaboratory=t,t?this.profileForm.patchValue({ejemplo:t?.ejemplo,name:t?.name,valor:t?.valor}):this.profileForm.reset()}onSubmit(){var t=this;return(0,c.Z)(function*(){if(t.isLoadingModal)return;if(t.profileForm.invalid)return void(t.error=!0);t.isLoadingModal=!0;const i={id:t.selectedLaboratory?.id,valor:t.profileForm.value.valor,name:t.profileForm.value.name,ejemplo:t.profileForm.value.ejemplo};try{yield t.adminService.updateSubscription(i),t.resultSave=!0,t.isLoading=!0,t.isLoadingModal=!1,t.ngOnInit(),t.modalClose.nativeElement.click()}catch(n){console.log("error",n),t.isLoadingModal=!1}})()}getLaboratories(){var t=this;return(0,c.Z)(function*(){t.laboratory=yield t.adminService.getLaboratories()})()}filter(t){if(t.target.value.length<=1)return void(this.laboratory=this.laboratoryClone);const i=this.laboratoryClone.filter(n=>n.name.toString().toLowerCase().includes(t.target.value.toLowerCase()));this.laboratory=i}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(A))},o.\u0275cmp=e.Xpm({type:o,selectors:[["ng-component"]],viewQuery:function(t,i){if(1&t&&e.Gf(Ze,5),2&t){let n;e.iGM(n=e.CRH())&&(i.modalClose=n.first)}},decls:52,vars:19,consts:[["current","laboratory"],[1,"container-fluid"],[3,"isLoading"],[1,"h3","mt-5"],[1,"input-group","mb-3"],[1,"input-group-prepend"],["id","basic-addon1",1,"input-group-text"],["type","text","aria-label","Username","aria-describedby","basic-addon1",1,"form-control",3,"keypress"],["type","button","data-bs-toggle","modal","data-bs-target","#exampleModal",1,"btn","btn-primary",3,"click"],[1,"row"],["class","col-4",4,"ngFor","ngForOf"],["id","exampleModal","tabindex","-1","aria-labelledby","exampleModalLabel","aria-hidden","true",1,"modal","fade"],["role","alert","aria-live","assertive","aria-atomic","true",1,"toast","align-items-center","text-white","bg-danger","border-0",2,"position","absolute","top","4%","right","5%",3,"ngClass"],[1,"d-flex"],[1,"toast-body"],["type","button","data-bs-dismiss","toast","aria-label","Close",1,"btn-close","btn-close-white","me-2","m-auto",3,"click"],[3,"formGroup","ngSubmit"],[1,"modal-dialog"],["style","position: absolute; margin: 50%; z-index: 99;","class","d-flex justify-content-center",4,"ngIf"],[1,"modal-content"],[1,"modal-header",3,"ngClass"],["id","exampleModalLabel",1,"modal-title","fs-5"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],["myModalClose",""],[1,"modal-body",3,"ngClass"],["type","text","aria-label","Username","aria-describedby","basic-addon1","formControlName","name","required","",1,"form-control"],["type","text","aria-label","Username","aria-describedby","basic-addon1","formControlName","ejemplo","required","",1,"form-control"],["type","text","aria-label","Username","aria-describedby","basic-addon1","formControlName","valor","required","",1,"form-control"],[1,"modal-footer",3,"ngClass"],["type","button","data-bs-dismiss","modal",1,"btn","btn-secondary"],["type","submit",1,"btn","btn-primary"],["role","alert","aria-live","assertive","aria-atomic","true",1,"toast","align-items-center","text-white","bg-success","border-0",2,"position","absolute","top","4%","right","5%",3,"ngClass"],[1,"col-4"],[1,"card","border-primary","mb-3"],[1,"card-header"],[1,"card-body","text-primary"],[1,"table","table-striped"],["scope","col"],[4,"ngFor","ngForOf"],[1,"col-2","text-truncate"],[1,"d-flex","justify-content-center",2,"position","absolute","margin","50%","z-index","99"],["role","status",1,"spinner-border"]],template:function(t,i){1&t&&(e._UZ(0,"enarm-admin-menu",0),e.TgZ(1,"div",1)(2,"enarm-loading-outlet",2)(3,"p",3),e._uU(4,"Laboratorios"),e.qZA(),e.TgZ(5,"div",4)(6,"div",5)(7,"span",6),e._uU(8,"Filtrar"),e.qZA()(),e.TgZ(9,"input",7),e.NdJ("keypress",function(r){return i.filter(r)}),e.qZA(),e.TgZ(10,"button",8),e.NdJ("click",function(){return i.setValuesForm()}),e._uU(11,"A\xf1adir Categoria"),e.qZA()(),e.TgZ(12,"div",9),e.YNc(13,Te,18,2,"div",10),e.qZA()()(),e.TgZ(14,"div",11)(15,"div",12)(16,"div",13)(17,"div",14),e._uU(18," Falta informacion por llenar "),e.qZA(),e.TgZ(19,"button",15),e.NdJ("click",function(){return i.error=!1}),e.qZA()()(),e.TgZ(20,"form",16),e.NdJ("ngSubmit",function(){return i.onSubmit()}),e.TgZ(21,"div",17),e.YNc(22,ye,2,0,"div",18),e.TgZ(23,"div",19)(24,"div",20)(25,"h1",21),e._uU(26,"Edicion de Usuario"),e.qZA(),e._UZ(27,"button",22,23),e.qZA(),e.TgZ(29,"div",24)(30,"div",4)(31,"span",6),e._uU(32,"Nombre*"),e.qZA(),e._UZ(33,"input",25),e.qZA(),e.TgZ(34,"div",4)(35,"span",6),e._uU(36,"Ejemplo*"),e.qZA(),e._UZ(37,"input",26),e.qZA(),e.TgZ(38,"div",4)(39,"span",6),e._uU(40,"Valor*"),e.qZA(),e._UZ(41,"input",27),e.qZA()(),e.TgZ(42,"div",28)(43,"button",29),e._uU(44,"Cerrar"),e.qZA(),e.TgZ(45,"button",30),e._uU(46,"Guardar Cambios"),e.qZA()()()()()(),e.TgZ(47,"div",31)(48,"div",13)(49,"div",14),e._uU(50," Datos guardados exitosamente "),e.qZA(),e.TgZ(51,"button",15),e.NdJ("click",function(){return i.resultSave=!1}),e.qZA()()()),2&t&&(e.xp6(2),e.Q6J("isLoading",i.isLoading),e.xp6(11),e.Q6J("ngForOf",i.laboratory),e.xp6(2),e.Q6J("ngClass",e.VKq(9,P,i.error)),e.xp6(5),e.Q6J("formGroup",i.profileForm),e.xp6(2),e.Q6J("ngIf",i.isLoadingModal),e.xp6(2),e.Q6J("ngClass",e.VKq(11,N,i.isLoadingModal)),e.xp6(5),e.Q6J("ngClass",e.VKq(13,N,i.isLoadingModal)),e.xp6(13),e.Q6J("ngClass",e.VKq(15,N,i.isLoadingModal)),e.xp6(5),e.Q6J("ngClass",e.VKq(17,P,i.resultSave)))},dependencies:[u.mk,u.sg,u.O5,a._Y,a.Fj,a.JJ,a.JL,a.Q7,a.sg,a.u,U.N,w]}),o})();const Ue=["myModalClose"];function we(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"tr")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td",36),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA(),e.TgZ(7,"td",36),e._uU(8),e.qZA(),e.TgZ(9,"td",36),e._uU(10),e.qZA(),e.TgZ(11,"td")(12,"button",8),e.NdJ("click",function(){const r=e.CHM(t).$implicit,l=e.oxw();return e.KtG(l.setValuesForm(r))}),e._uU(13,"Editar"),e.qZA()()()}if(2&o){const t=s.$implicit;e.xp6(2),e.Oqu(t.id),e.xp6(2),e.Oqu(t.descripcion),e.xp6(2),e.Oqu(t.tipo),e.xp6(2),e.Oqu(t.costo),e.xp6(2),e.hij("",t.duracionMes," meses")}}function xe(o,s){1&o&&(e.TgZ(0,"div",37),e._UZ(1,"div",38),e.qZA())}const z=function(o){return{show:o}},J=function(o){return{"opacity-25":o}};let Qe=(()=>{class o{constructor(t){this.adminService=t,this.isLoadingModal=!1,this.error=!1,this.resultSave=!1,this.isLoading=!0,this.profileForm=new a.cw({costo:new a.NI(0),descripcion:new a.NI(""),duracionMes:new a.NI(0),tipo:new a.NI("")})}ngOnInit(){var t=this;return(0,c.Z)(function*(){yield t.getSusbcriptions(),t.subscriptionsClone=[...t.subscriptions],t.isLoading=!1})()}setValuesForm(t){this.selectedSubs=t,t?this.profileForm.patchValue({costo:t?.costo,descripcion:t?.descripcion,duracionMes:t?.duracionMes,tipo:t?.tipo}):this.profileForm.reset()}onSubmit(){var t=this;return(0,c.Z)(function*(){if(t.isLoadingModal)return;if(t.profileForm.invalid)return void(t.error=!0);t.isLoadingModal=!0;const i={id:t.selectedSubs?.id,costo:t.profileForm.value.costo,descripcion:t.profileForm.value.descripcion,duracionMes:t.profileForm.value.duracionMes,tipo:t.profileForm.value.tipo};try{yield t.adminService.updateSubscription(i),t.resultSave=!0,t.isLoading=!0,t.isLoadingModal=!1,t.ngOnInit(),t.modalClose.nativeElement.click()}catch(n){console.log("error",n),t.isLoadingModal=!1}})()}getSusbcriptions(){var t=this;return(0,c.Z)(function*(){t.subscriptions=yield t.adminService.getSusbcriptions()})()}filter(t){if(t.target.value.length<=1)return void(this.subscriptions=this.subscriptionsClone);const i=this.subscriptionsClone.filter(n=>n.costo.toString().toLowerCase().includes(t.target.value.toLowerCase())||n.descripcion.toLowerCase().includes(t.target.value.toLowerCase())||n.duracionMes.toString().toLowerCase().includes(t.target.value.toLowerCase())||n.tipo.toLowerCase().includes(t.target.value.toLowerCase()));this.subscriptions=i}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(A))},o.\u0275cmp=e.Xpm({type:o,selectors:[["ng-component"]],viewQuery:function(t,i){if(1&t&&e.Gf(Ue,5),2&t){let n;e.iGM(n=e.CRH())&&(i.modalClose=n.first)}},decls:71,vars:19,consts:[["current","subscripciones"],[1,"container-fluid"],[3,"isLoading"],[1,"h3","mt-5"],[1,"input-group","mb-3"],[1,"input-group-prepend"],["id","basic-addon1",1,"input-group-text"],["type","text","aria-label","Username","aria-describedby","basic-addon1",1,"form-control",3,"keypress"],["type","button","data-bs-toggle","modal","data-bs-target","#exampleModal",1,"btn","btn-primary",3,"click"],[1,"row"],[1,"col-12"],[1,"table","table-striped"],["scope","col"],[4,"ngFor","ngForOf"],["id","exampleModal","tabindex","-1","aria-labelledby","exampleModalLabel","aria-hidden","true",1,"modal","fade"],["role","alert","aria-live","assertive","aria-atomic","true",1,"toast","align-items-center","text-white","bg-danger","border-0",2,"position","absolute","top","4%","right","5%",3,"ngClass"],[1,"d-flex"],[1,"toast-body"],["type","button","data-bs-dismiss","toast","aria-label","Close",1,"btn-close","btn-close-white","me-2","m-auto",3,"click"],[3,"formGroup","ngSubmit"],[1,"modal-dialog"],["style","position: absolute; margin: 50%; z-index: 99;","class","d-flex justify-content-center",4,"ngIf"],[1,"modal-content"],[1,"modal-header",3,"ngClass"],["id","exampleModalLabel",1,"modal-title","fs-5"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],["myModalClose",""],[1,"modal-body",3,"ngClass"],["type","text","aria-label","Username","aria-describedby","basic-addon1","formControlName","descripcion","required","",1,"form-control"],["type","text","aria-label","Username","aria-describedby","basic-addon1","formControlName","tipo","required","",1,"form-control"],["type","number","aria-label","Username","aria-describedby","basic-addon1","formControlName","costo","required","",1,"form-control"],["type","number","aria-label","Username","aria-describedby","basic-addon1","formControlName","duracionMes","required","",1,"form-control"],[1,"modal-footer",3,"ngClass"],["type","button","data-bs-dismiss","modal",1,"btn","btn-secondary"],["type","submit",1,"btn","btn-primary"],["role","alert","aria-live","assertive","aria-atomic","true",1,"toast","align-items-center","text-white","bg-success","border-0",2,"position","absolute","top","4%","right","5%",3,"ngClass"],[1,"col-2","text-truncate"],[1,"d-flex","justify-content-center",2,"position","absolute","margin","50%","z-index","99"],["role","status",1,"spinner-border"]],template:function(t,i){1&t&&(e._UZ(0,"enarm-admin-menu",0),e.TgZ(1,"div",1)(2,"enarm-loading-outlet",2)(3,"p",3),e._uU(4,"Subscripciones"),e.qZA(),e.TgZ(5,"div",4)(6,"div",5)(7,"span",6),e._uU(8,"Filtrar"),e.qZA()(),e.TgZ(9,"input",7),e.NdJ("keypress",function(r){return i.filter(r)}),e.qZA(),e.TgZ(10,"button",8),e.NdJ("click",function(){return i.setValuesForm()}),e._uU(11,"A\xf1adir Subscripcion"),e.qZA()(),e.TgZ(12,"div",9)(13,"div",10)(14,"table",11)(15,"thead")(16,"tr")(17,"th",12),e._uU(18,"id"),e.qZA(),e.TgZ(19,"th",12),e._uU(20,"Descripcion"),e.qZA(),e.TgZ(21,"th",12),e._uU(22,"Tipo"),e.qZA(),e.TgZ(23,"th",12),e._uU(24,"Costo"),e.qZA(),e.TgZ(25,"th",12),e._uU(26,"Duracion"),e.qZA()()(),e.TgZ(27,"tbody"),e.YNc(28,we,14,5,"tr",13),e.qZA()()()()()(),e.TgZ(29,"div",14)(30,"div",15)(31,"div",16)(32,"div",17),e._uU(33," Falta informacion por llenar "),e.qZA(),e.TgZ(34,"button",18),e.NdJ("click",function(){return i.error=!1}),e.qZA()()(),e.TgZ(35,"form",19),e.NdJ("ngSubmit",function(){return i.onSubmit()}),e.TgZ(36,"div",20),e.YNc(37,xe,2,0,"div",21),e.TgZ(38,"div",22)(39,"div",23)(40,"h1",24),e._uU(41,"Edicion de Usuario"),e.qZA(),e._UZ(42,"button",25,26),e.qZA(),e.TgZ(44,"div",27)(45,"div",4)(46,"span",6),e._uU(47,"Descripcion*"),e.qZA(),e._UZ(48,"input",28),e.qZA(),e.TgZ(49,"div",4)(50,"span",6),e._uU(51,"Tipo*"),e.qZA(),e._UZ(52,"input",29),e.qZA(),e.TgZ(53,"div",4)(54,"span",6),e._uU(55,"Costo*"),e.qZA(),e._UZ(56,"input",30),e.qZA(),e.TgZ(57,"div",4)(58,"span",6),e._uU(59,"Duracion en Meses*"),e.qZA(),e._UZ(60,"input",31),e.qZA()(),e.TgZ(61,"div",32)(62,"button",33),e._uU(63,"Cerrar"),e.qZA(),e.TgZ(64,"button",34),e._uU(65,"Guardar Cambios"),e.qZA()()()()()(),e.TgZ(66,"div",35)(67,"div",16)(68,"div",17),e._uU(69," Datos guardados exitosamente "),e.qZA(),e.TgZ(70,"button",18),e.NdJ("click",function(){return i.resultSave=!1}),e.qZA()()()),2&t&&(e.xp6(2),e.Q6J("isLoading",i.isLoading),e.xp6(26),e.Q6J("ngForOf",i.subscriptions),e.xp6(2),e.Q6J("ngClass",e.VKq(9,z,i.error)),e.xp6(5),e.Q6J("formGroup",i.profileForm),e.xp6(2),e.Q6J("ngIf",i.isLoadingModal),e.xp6(2),e.Q6J("ngClass",e.VKq(11,J,i.isLoadingModal)),e.xp6(5),e.Q6J("ngClass",e.VKq(13,J,i.isLoadingModal)),e.xp6(17),e.Q6J("ngClass",e.VKq(15,J,i.isLoadingModal)),e.xp6(5),e.Q6J("ngClass",e.VKq(17,z,i.resultSave)))},dependencies:[u.mk,u.sg,u.O5,a._Y,a.Fj,a.wV,a.JJ,a.JL,a.Q7,a.sg,a.u,U.N,w]}),o})();var x=(()=>{return(o=x||(x={})).ADD="ADD",o.EDIT="EDIT",o.DELETE="DELETE",o.ADD_SUBCATEGORY="ADD_SUBCATEGORY",x;var o})();const Ee=["myModalClose"];function Le(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"tr")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td")(6,"button",8),e.NdJ("click",function(){const r=e.CHM(t).$implicit,l=e.oxw(2);return l.setValuesForm(r),e.KtG(l.selection=l.TYPE_SELECTION.EDIT)}),e._uU(7,"Editar"),e.qZA()()()}if(2&o){const t=s.$implicit;e.xp6(2),e.Oqu(t.id),e.xp6(2),e.Oqu(t.Nombre)}}function Me(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"div",31)(1,"div",32)(2,"div",33),e._uU(3,"Categoria.- "),e.TgZ(4,"b"),e._uU(5),e.ALo(6,"titlecase"),e.qZA()(),e.TgZ(7,"div",34)(8,"table",35)(9,"thead")(10,"tr")(11,"th",36),e._uU(12,"ID"),e.qZA(),e.TgZ(13,"th",36),e._uU(14,"Subcategoria"),e.qZA()()(),e.TgZ(15,"tbody"),e.YNc(16,Le,8,2,"tr",37),e.TgZ(17,"tr"),e._UZ(18,"td")(19,"td"),e.TgZ(20,"td")(21,"button",38),e.NdJ("click",function(){const r=e.CHM(t).$implicit,l=e.oxw();return l.setValuesForm(r),e.KtG(l.selection=l.TYPE_SELECTION.ADD_SUBCATEGORY)}),e._uU(22,"Agregar"),e.qZA()()()()()()()()}if(2&o){const t=s.$implicit;e.xp6(5),e.Oqu(e.lcZ(6,2,t.name)),e.xp6(11),e.Q6J("ngForOf",t.subcategoria)}}function Se(o,s){1&o&&(e.TgZ(0,"div",39),e._UZ(1,"div",40),e.qZA())}function Fe(o,s){1&o&&(e.TgZ(0,"div",4)(1,"span",6),e._uU(2,"Categoria*"),e.qZA(),e._UZ(3,"input",41),e.qZA())}const j=function(o){return{show:o}},k=function(o){return{"opacity-25":o}};let Ne=(()=>{class o{constructor(t){this.adminService=t,this.TYPE_SELECTION=x,this.selection=x.ADD,this.isLoadingModal=!1,this.error=!1,this.resultSave=!1,this.isLoading=!0,this.categorieForm=new a.cw({Nombre:new a.NI(""),subCategoria:new a.NI("")})}ngOnInit(){var t=this;return(0,c.Z)(function*(){yield t.getCategories(),t.categoriesClone=[...t.categories],t.isLoading=!1})()}setValuesForm(t){this.selectedCategory=t,t?this.categorieForm.patchValue({subCategoria:t?.Nombre}):this.categorieForm.reset()}addCategory(){var t=this;return(0,c.Z)(function*(){if(t.isLoadingModal)return;if(""===t.categorieForm.value.Nombre||""===t.categorieForm.value.subCategoria||null===t.categorieForm.value.Nombre||null===t.categorieForm.value.subCategoria)return void(t.error=!0);t.isLoadingModal=!0;const i=[{category:t.categorieForm.value.Nombre,subcategories:[t.categorieForm.value.subCategoria]}];try{yield t.adminService.addCategory(i),t.resultSave=!0,t.isLoading=!0,t.isLoadingModal=!1,t.ngOnInit(),t.modalClose.nativeElement.click()}catch(n){console.log("error",n),t.isLoadingModal=!1}})()}chooseSubcategory(t){var i=this;return(0,c.Z)(function*(){t===x.EDIT?i.editSubcategory():i.addSubcategory()})()}editSubcategory(){var t=this;return(0,c.Z)(function*(){if(t.isLoadingModal)return;if(""===t.categorieForm.value.subCategoria||null===t.categorieForm.value.subCategoria)return void(t.error=!0);t.isLoadingModal=!0;const i={id:t.selectedCategory?.id,name:t.categorieForm.value.subCategoria};try{yield t.adminService.editSubCategory(i),t.resultSave=!0,t.isLoading=!0,t.isLoadingModal=!1,t.ngOnInit(),t.modalClose.nativeElement.click()}catch(n){console.log("error",n),t.isLoadingModal=!1}})()}addSubcategory(){var t=this;return(0,c.Z)(function*(){if(t.isLoadingModal)return;if(""===t.categorieForm.value.subCategoria||null===t.categorieForm.value.subCategoria)return void(t.error=!0);t.isLoadingModal=!0;const i={fk_id:t.selectedCategory?.id,name:t.categorieForm.value.subCategoria};try{yield t.adminService.addSubCategory(i),t.resultSave=!0,t.isLoading=!0,t.isLoadingModal=!1,t.ngOnInit(),t.modalClose.nativeElement.click()}catch(n){console.log("error",n),t.isLoadingModal=!1}})()}getCategories(){var t=this;return(0,c.Z)(function*(){t.categories=yield t.adminService.getCategories()})()}filter(t){if(t.target.value.length<=1)return void(this.categories=this.categoriesClone);const i=this.categoriesClone.filter(n=>n.name.toString().toLowerCase().includes(t.target.value.toLowerCase()));this.categories=i}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(A))},o.\u0275cmp=e.Xpm({type:o,selectors:[["ng-component"]],viewQuery:function(t,i){if(1&t&&e.Gf(Ee,5),2&t){let n;e.iGM(n=e.CRH())&&(i.modalClose=n.first)}},decls:45,vars:21,consts:[["current","categories"],[1,"container-fluid"],[3,"isLoading"],[1,"h3","mt-5"],[1,"input-group","mb-3"],[1,"input-group-prepend"],["id","basic-addon1",1,"input-group-text"],["type","text","aria-label","Username","aria-describedby","basic-addon1",1,"form-control",3,"keypress"],["type","button","data-bs-toggle","modal","data-bs-target","#exampleModal",1,"btn","btn-primary",3,"click"],[1,"row"],["class","col-4",4,"ngFor","ngForOf"],["id","exampleModal","tabindex","-1","aria-labelledby","exampleModalLabel","aria-hidden","true",1,"modal","fade"],["role","alert","aria-live","assertive","aria-atomic","true",1,"toast","align-items-center","text-white","bg-danger","border-0",2,"position","absolute","top","4%","right","5%",3,"ngClass"],[1,"d-flex"],[1,"toast-body"],["type","button","data-bs-dismiss","toast","aria-label","Close",1,"btn-close","btn-close-white","me-2","m-auto",3,"click"],[3,"formGroup","ngSubmit"],[1,"modal-dialog"],["style","position: absolute; margin: 50%; z-index: 99;","class","d-flex justify-content-center",4,"ngIf"],[1,"modal-content"],[1,"modal-header",3,"ngClass"],["id","exampleModalLabel",1,"modal-title","fs-5"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],["myModalClose",""],[1,"modal-body",3,"ngClass"],["class","input-group mb-3",4,"ngIf"],["type","text","aria-label","subCategoria","aria-describedby","basic-addon1","formControlName","subCategoria",1,"form-control"],[1,"modal-footer",3,"ngClass"],["type","button","data-bs-dismiss","modal",1,"btn","btn-secondary"],["type","submit",1,"btn","btn-primary"],["role","alert","aria-live","assertive","aria-atomic","true",1,"toast","align-items-center","text-white","bg-success","border-0",2,"position","absolute","top","4%","right","5%",3,"ngClass"],[1,"col-4"],[1,"card","border-primary","mb-3"],[1,"card-header"],[1,"card-body","text-primary"],[1,"table","table-striped"],["scope","col"],[4,"ngFor","ngForOf"],["type","button","data-bs-toggle","modal","data-bs-target","#exampleModal",1,"btn","btn-success",3,"click"],[1,"d-flex","justify-content-center",2,"position","absolute","margin","50%","z-index","99"],["role","status",1,"spinner-border"],["type","text","aria-label","Nombre","aria-describedby","basic-addon1","formControlName","Nombre",1,"form-control"]],template:function(t,i){1&t&&(e._UZ(0,"enarm-admin-menu",0),e.TgZ(1,"div",1)(2,"enarm-loading-outlet",2)(3,"p",3),e._uU(4,"Categorias"),e.qZA(),e.TgZ(5,"div",4)(6,"div",5)(7,"span",6),e._uU(8,"Filtrar"),e.qZA()(),e.TgZ(9,"input",7),e.NdJ("keypress",function(r){return i.filter(r)}),e.qZA(),e.TgZ(10,"button",8),e.NdJ("click",function(){return i.setValuesForm(),i.selection=i.TYPE_SELECTION.ADD}),e._uU(11,"A\xf1adir Categoria"),e.qZA()(),e.TgZ(12,"div",9),e.YNc(13,Me,23,4,"div",10),e.qZA()()(),e.TgZ(14,"div",11)(15,"div",12)(16,"div",13)(17,"div",14),e._uU(18," Falta informacion por llenar "),e.qZA(),e.TgZ(19,"button",15),e.NdJ("click",function(){return i.error=!1}),e.qZA()()(),e.TgZ(20,"form",16),e.NdJ("ngSubmit",function(){return i.selection===i.TYPE_SELECTION.ADD?i.addCategory():i.chooseSubcategory(i.selection)}),e.TgZ(21,"div",17),e.YNc(22,Se,2,0,"div",18),e.TgZ(23,"div",19)(24,"div",20)(25,"h1",21),e._uU(26),e.qZA(),e._UZ(27,"button",22,23),e.qZA(),e.TgZ(29,"div",24),e.YNc(30,Fe,4,0,"div",25),e.TgZ(31,"div",4)(32,"span",6),e._uU(33,"Subcategoria*"),e.qZA(),e._UZ(34,"input",26),e.qZA()(),e.TgZ(35,"div",27)(36,"button",28),e._uU(37,"Cerrar"),e.qZA(),e.TgZ(38,"button",29),e._uU(39,"Guardar Cambios"),e.qZA()()()()()(),e.TgZ(40,"div",30)(41,"div",13)(42,"div",14),e._uU(43," Datos guardados exitosamente "),e.qZA(),e.TgZ(44,"button",15),e.NdJ("click",function(){return i.resultSave=!1}),e.qZA()()()),2&t&&(e.xp6(2),e.Q6J("isLoading",i.isLoading),e.xp6(11),e.Q6J("ngForOf",i.categories),e.xp6(2),e.Q6J("ngClass",e.VKq(11,j,i.error)),e.xp6(5),e.Q6J("formGroup",i.categorieForm),e.xp6(2),e.Q6J("ngIf",i.isLoadingModal),e.xp6(2),e.Q6J("ngClass",e.VKq(13,k,i.isLoadingModal)),e.xp6(2),e.hij("",i.selection===i.TYPE_SELECTION.ADD?"A\xf1adir":"Editar"," Categoria"),e.xp6(3),e.Q6J("ngClass",e.VKq(15,k,i.isLoadingModal)),e.xp6(1),e.Q6J("ngIf",i.selection===i.TYPE_SELECTION.ADD),e.xp6(5),e.Q6J("ngClass",e.VKq(17,k,i.isLoadingModal)),e.xp6(5),e.Q6J("ngClass",e.VKq(19,j,i.resultSave)))},dependencies:[u.mk,u.sg,u.O5,a._Y,a.Fj,a.JJ,a.JL,a.sg,a.u,U.N,w,u.rS]}),o})();function C(o,s=!0){try{return s?btoa(o):atob(o)}catch(t){return console.log(t),o}}let G=(()=>{class o{constructor(t){this.httpclient=t}getQuestions(){return new Promise((t,i)=>{this.httpclient.get(`${b.T}/questions/all`).subscribe(n=>{t(n.rows)},i)})}addClinicalCase(t){return new Promise((i,n)=>{this.httpclient.post(`${b.T}/questions/add-question`,t).subscribe(r=>{i(r)},n)})}getQuestion(t){return new Promise((i,n)=>{this.httpclient.get(`${b.T}/questions/question?id=${t}`).subscribe(r=>{i(r.clinicCaseData)},n)})}}return o.\u0275fac=function(t){return new(t||o)(e.LFG(M.eN))},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();function Je(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"tr")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td",15),e._UZ(6,"div",16),e.qZA(),e.TgZ(7,"td"),e._uU(8),e.qZA(),e.TgZ(9,"td")(10,"button",8),e.NdJ("click",function(){const r=e.CHM(t).$implicit,l=e.oxw();return e.KtG(l.chooseQuestion(r))}),e._uU(11,"Editar"),e.qZA()()()}if(2&o){const t=s.$implicit;e.xp6(2),e.Oqu(t.id),e.xp6(2),e.Oqu(t.clinic_name),e.xp6(2),e.Q6J("innerHTML",t.clinic_description,e.oJD),e.xp6(2),e.Oqu(1===t.active?"Activa":"Desactivada")}}let ke=(()=>{class o{constructor(t,i){this.router=t,this.adminQuesitonService=i,this.isLoadingModal=!1,this.isLoading=!0}ngOnInit(){var t=this;return(0,c.Z)(function*(){yield t.getQuestions(),t.questionClone=[...t.questions],t.isLoading=!1})()}getQuestions(){var t=this;return(0,c.Z)(function*(){t.questions=yield t.adminQuesitonService.getQuestions(),t.questions.forEach(i=>{i.clinic_description=C(i.clinic_description,!1)})})()}filter(t){if(t.target.value.length<=3)return void(this.questions=this.questionClone);const i=this.questionClone.filter(n=>n.resumen.toLowerCase().includes(t.target.value.toLowerCase())||n.clinic_name.toLowerCase().includes(t.target.value.toLowerCase())||n.pregunta.toLowerCase().includes(t.target.value.toLowerCase()));this.questions=i}chooseQuestion(t){this.router.navigateByUrl(t?`/admin/questions/edit/${t.id}`:"/admin/questions/add")}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(y.F0),e.Y36(G))},o.\u0275cmp=e.Xpm({type:o,selectors:[["ng-component"]],decls:31,vars:2,consts:[["current","questions"],[1,"container-fluid"],[3,"isLoading"],[1,"h3","mt-5"],[1,"input-group","mb-3"],[1,"input-group-prepend"],["id","basic-addon1",1,"input-group-text"],["type","text","aria-label","Username","aria-describedby","basic-addon1",1,"form-control",3,"keypress"],["type","button","data-bs-toggle","modal","data-bs-target","#exampleModal",1,"btn","btn-primary",3,"click"],["type","button","data-bs-toggle","modal","data-bs-target","#exampleModal",1,"btn","btn-warning",3,"click"],[1,"row"],[1,"col-12"],[1,"table","table-striped"],["scope","col"],[4,"ngFor","ngForOf"],[1,"col-2","text-truncate"],[3,"innerHTML"]],template:function(t,i){1&t&&(e._UZ(0,"enarm-admin-menu",0),e.TgZ(1,"div",1)(2,"enarm-loading-outlet",2)(3,"p",3),e._uU(4,"Preguntas"),e.qZA(),e.TgZ(5,"div",4)(6,"div",5)(7,"span",6),e._uU(8,"Filtrar"),e.qZA()(),e.TgZ(9,"input",7),e.NdJ("keypress",function(r){return i.filter(r)}),e.qZA(),e.TgZ(10,"button",8),e.NdJ("click",function(){return i.chooseQuestion()}),e._uU(11,"A\xf1adir Caso clinico"),e.qZA(),e.TgZ(12,"button",9),e.NdJ("click",function(){return i.chooseQuestion()}),e._uU(13,"A\xf1adir Masivamente"),e.qZA()(),e.TgZ(14,"div",10)(15,"div",11)(16,"table",12)(17,"thead")(18,"tr")(19,"th",13),e._uU(20,"id"),e.qZA(),e.TgZ(21,"th",13),e._uU(22,"Nombre del caso clinico"),e.qZA(),e.TgZ(23,"th",13),e._uU(24,"Resumen"),e.qZA(),e.TgZ(25,"th",13),e._uU(26,"Estatus"),e.qZA(),e.TgZ(27,"th",13),e._uU(28,"Actions"),e.qZA()()(),e.TgZ(29,"tbody"),e.YNc(30,Je,12,4,"tr",14),e.qZA()()()()()()),2&t&&(e.xp6(2),e.Q6J("isLoading",i.isLoading),e.xp6(28),e.Q6J("ngForOf",i.questions))},dependencies:[u.sg,U.N,w]}),o})();var H=g(1481),Oe=g(9770),Ie=g(727),O=g(4968),Ve=g(4707),Ye=g(3099),R=g(4999);function Pe(o,s){1&o&&e._UZ(0,"div",2)}function ze(o,s){1&o&&e._UZ(0,"pre",2)}function je(o,s){if(1&o&&(e.ynx(0),e.YNc(1,Pe,1,0,"div",1),e.YNc(2,ze,1,0,"pre",1),e.BQk()),2&o){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",!t.preserve),e.xp6(1),e.Q6J("ngIf",t.preserve)}}function Ge(o,s){1&o&&e._UZ(0,"div",2)}function He(o,s){1&o&&e._UZ(0,"pre",2)}function Re(o,s){if(1&o&&(e.ynx(0),e.YNc(1,Ge,1,0,"div",1),e.YNc(2,He,1,0,"pre",1),e.BQk()),2&o){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",!t.preserve),e.xp6(1),e.Q6J("ngIf",t.preserve)}}const Ke=[[["","quill-editor-toolbar",""]]],$e=["[quill-editor-toolbar]"],I={toolbar:[["bold","italic","underline","strike"],["blockquote","code-block"],[{header:1},{header:2}],[{list:"ordered"},{list:"bullet"}],[{script:"sub"},{script:"super"}],[{indent:"-1"},{indent:"+1"}],[{direction:"rtl"}],[{size:["small",!1,"large","huge"]}],[{header:[1,2,3,4,5,6,!1]}],[{color:[]},{background:[]}],[{font:[]}],[{align:[]}],["clean"],["link","image","video"]]},L=(o,s)=>o||s||"html",K=new e.OlP("config",{providedIn:"root",factory:()=>({modules:I})});let $=(()=>{class o{constructor(t,i){var n=this;this.config=i,this.quill$=(0,Oe.P)((0,c.Z)(function*(){if(!n.Quill){const r=n.document.addEventListener;n.document.addEventListener=n.document.__zone_symbol__addEventListener||n.document.addEventListener;const l=yield g.e(971).then(g.t.bind(g,9971,19));n.document.addEventListener=r,n.Quill=l.default?l.default:l}return n.config.customOptions?.forEach(r=>{const l=n.Quill.import(r.import);l.whitelist=r.whitelist,n.Quill.register(l,!0,n.config.suppressGlobalRegisterWarning)}),n.config.customModules?.forEach(({implementation:r,path:l})=>{n.Quill.register(l,r,n.config.suppressGlobalRegisterWarning)}),n.Quill})).pipe(function De(o,s,t){let i,n=!1;return o&&"object"==typeof o?({bufferSize:i=1/0,windowTime:s=1/0,refCount:n=!1,scheduler:t}=o):i=o??1/0,(0,Ye.B)({connector:()=>new Ve.t(i,s,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:n})}({bufferSize:1,refCount:!0})),this.document=t.get(u.K0),this.config||(this.config={modules:I})}getQuill(){return this.quill$}}return o.\u0275fac=function(t){return new(t||o)(e.LFG(e.zs3),e.LFG(K,8))},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})(),Be=(()=>{class o{constructor(t,i,n,r,l,m,_,v){this.elementRef=i,this.cd=n,this.domSanitizer=r,this.platformId=l,this.renderer=m,this.zone=_,this.service=v,this.required=!1,this.customToolbarPosition="top",this.styles=null,this.strict=!0,this.customOptions=[],this.customModules=[],this.preserveWhitespace=!1,this.trimOnValidation=!1,this.compareValues=!1,this.filterNull=!1,this.defaultEmptyValue=null,this.onEditorCreated=new e.vpe,this.onEditorChanged=new e.vpe,this.onContentChanged=new e.vpe,this.onSelectionChanged=new e.vpe,this.onFocus=new e.vpe,this.onBlur=new e.vpe,this.disabled=!1,this.preserve=!1,this.toolbarPosition="top",this.subscription=null,this.quillSubscription=null,this.valueGetter=(h,f)=>{let d=f.querySelector(".ql-editor").innerHTML;("<p><br></p>"===d||"<div><br></div>"===d)&&(d=this.defaultEmptyValue);let p=d;const Z=L(this.format,this.service.config.format);if("text"===Z)p=h.getText();else if("object"===Z)p=h.getContents();else if("json"===Z)try{p=JSON.stringify(h.getContents())}catch{p=h.getText()}return p},this.valueSetter=(h,f)=>{const d=L(this.format,this.service.config.format);if("html"===d)return([!0,!1].includes(this.sanitize)?this.sanitize:this.service.config.sanitize||!1)&&(f=this.domSanitizer.sanitize(e.q3G.HTML,f)),h.clipboard.convert(f);if("json"===d)try{return JSON.parse(f)}catch{return[{insert:f}]}return f},this.selectionChangeHandler=(h,f,d)=>{const p=!h&&!!this.onModelTouched;!this.onBlur.observed&&!this.onFocus.observed&&!this.onSelectionChanged.observed&&!p||this.zone.run(()=>{null===h?this.onBlur.emit({editor:this.quillEditor,source:d}):null===f&&this.onFocus.emit({editor:this.quillEditor,source:d}),this.onSelectionChanged.emit({editor:this.quillEditor,oldRange:f,range:h,source:d}),p&&this.onModelTouched(),this.cd.markForCheck()})},this.textChangeHandler=(h,f,d)=>{const p=this.quillEditor.getText(),Z=this.quillEditor.getContents();let q=this.editorElem.querySelector(".ql-editor").innerHTML;("<p><br></p>"===q||"<div><br></div>"===q)&&(q=this.defaultEmptyValue);const T=this.trackChanges||this.service.config.trackChanges,te=("user"===d||T&&"all"===T)&&!!this.onModelChange;!this.onContentChanged.observed&&!te||this.zone.run(()=>{te&&this.onModelChange(this.valueGetter(this.quillEditor,this.editorElem)),this.onContentChanged.emit({content:Z,delta:h,editor:this.quillEditor,html:q,oldDelta:f,source:d,text:p}),this.cd.markForCheck()})},this.editorChangeHandler=(h,f,d,p)=>{if(this.onEditorChanged.observed)if("text-change"===h){const Z=this.quillEditor.getText(),q=this.quillEditor.getContents();let T=this.editorElem.querySelector(".ql-editor").innerHTML;("<p><br></p>"===T||"<div><br></div>"===T)&&(T=this.defaultEmptyValue),this.zone.run(()=>{this.onEditorChanged.emit({content:q,delta:f,editor:this.quillEditor,event:h,html:T,oldDelta:d,source:p,text:Z}),this.cd.markForCheck()})}else this.zone.run(()=>{this.onEditorChanged.emit({editor:this.quillEditor,event:h,oldRange:d,range:f,source:p}),this.cd.markForCheck()})},this.document=t.get(u.K0)}static normalizeClassNames(t){return t.trim().split(" ").reduce((n,r)=>{const l=r.trim();return l&&n.push(l),n},[])}ngOnInit(){this.preserve=this.preserveWhitespace,this.toolbarPosition=this.customToolbarPosition}ngAfterViewInit(){(0,u.PM)(this.platformId)||(this.quillSubscription=this.service.getQuill().subscribe(t=>{this.editorElem=this.elementRef.nativeElement.querySelector("[quill-editor-element]");const i=this.elementRef.nativeElement.querySelector("[quill-editor-toolbar]"),n=Object.assign({},this.modules||this.service.config.modules);i?n.toolbar=i:void 0===n.toolbar&&(n.toolbar=I.toolbar);let r=void 0!==this.placeholder?this.placeholder:this.service.config.placeholder;void 0===r&&(r="Insert text here ..."),this.styles&&Object.keys(this.styles).forEach(d=>{this.renderer.setStyle(this.editorElem,d,this.styles[d])}),this.classes&&this.addClasses(this.classes),this.customOptions.forEach(d=>{const p=t.import(d.import);p.whitelist=d.whitelist,t.register(p,!0)}),this.customModules.forEach(({implementation:d,path:p})=>{t.register(p,d)});let l=this.bounds&&"self"===this.bounds?this.editorElem:this.bounds;l||(l=this.service.config.bounds?this.service.config.bounds:this.document.body);let m=this.debug;!m&&!1!==m&&this.service.config.debug&&(m=this.service.config.debug);let _=this.readOnly;!_&&!1!==this.readOnly&&(_=void 0!==this.service.config.readOnly&&this.service.config.readOnly);let v=this.defaultEmptyValue;this.service.config.hasOwnProperty("defaultEmptyValue")&&(v=this.service.config.defaultEmptyValue);let h=this.scrollingContainer;!h&&null!==this.scrollingContainer&&(h=null===this.service.config.scrollingContainer||this.service.config.scrollingContainer?this.service.config.scrollingContainer:null);let f=this.formats;if(!f&&void 0===f&&(f=this.service.config.formats?[...this.service.config.formats]:null===this.service.config.formats?null:void 0),this.zone.runOutsideAngular(()=>{if(this.quillEditor=new t(this.editorElem,{bounds:l,debug:m,formats:f,modules:n,placeholder:r,readOnly:_,defaultEmptyValue:v,scrollingContainer:h,strict:this.strict,theme:this.theme||(this.service.config.theme?this.service.config.theme:"snow")}),this.linkPlaceholder){const p=this.quillEditor?.theme?.tooltip?.root?.querySelector("input[data-link]");p?.dataset&&(p.dataset.link=this.linkPlaceholder)}}),this.content){if("text"===L(this.format,this.service.config.format))this.quillEditor.setText(this.content,"silent");else{const p=this.valueSetter(this.quillEditor,this.content);this.quillEditor.setContents(p,"silent")}this.quillEditor.getModule("history").clear()}this.setDisabledState(),this.addQuillEventListeners(),(this.onEditorCreated.observed||this.onValidatorChanged)&&requestAnimationFrame(()=>{this.onValidatorChanged&&this.onValidatorChanged(),this.onEditorCreated.emit(this.quillEditor)})}))}ngOnDestroy(){this.dispose(),this.quillSubscription?.unsubscribe(),this.quillSubscription=null}ngOnChanges(t){if(this.quillEditor){if(t.readOnly&&this.quillEditor.enable(!t.readOnly.currentValue),t.placeholder&&(this.quillEditor.root.dataset.placeholder=t.placeholder.currentValue),t.defaultEmptyValue&&(this.quillEditor.root.dataset.defaultEmptyValue=t.defaultEmptyValue.currentValue),t.styles){const i=t.styles.currentValue,n=t.styles.previousValue;n&&Object.keys(n).forEach(r=>{this.renderer.removeStyle(this.editorElem,r)}),i&&Object.keys(i).forEach(r=>{this.renderer.setStyle(this.editorElem,r,this.styles[r])})}if(t.classes){const i=t.classes.currentValue,n=t.classes.previousValue;n&&this.removeClasses(n),i&&this.addClasses(i)}t.debounceTime&&this.addQuillEventListeners()}}addClasses(t){o.normalizeClassNames(t).forEach(i=>{this.renderer.addClass(this.editorElem,i)})}removeClasses(t){o.normalizeClassNames(t).forEach(i=>{this.renderer.removeClass(this.editorElem,i)})}writeValue(t){if(this.filterNull&&null===t||(this.content=t,!this.quillEditor))return;const i=L(this.format,this.service.config.format),n=this.valueSetter(this.quillEditor,t);if(this.compareValues){const r=this.quillEditor.getContents();if(JSON.stringify(r)===JSON.stringify(n))return}t?"text"===i?this.quillEditor.setText(t):this.quillEditor.setContents(n):this.quillEditor.setText("")}setDisabledState(t=this.disabled){this.disabled=t,this.quillEditor&&(t?(this.quillEditor.disable(),this.renderer.setAttribute(this.elementRef.nativeElement,"disabled","disabled")):(this.readOnly||this.quillEditor.enable(),this.renderer.removeAttribute(this.elementRef.nativeElement,"disabled")))}registerOnChange(t){this.onModelChange=t}registerOnTouched(t){this.onModelTouched=t}registerOnValidatorChange(t){this.onValidatorChanged=t}validate(){if(!this.quillEditor)return null;const t={};let i=!0;const n=this.quillEditor.getText(),r=this.trimOnValidation?n.trim().length:1===n.length&&0===n.trim().length?0:n.length-1,l=this.quillEditor.getContents().ops,m=l&&1===l.length&&["\n",""].includes(l[0].insert);return this.minLength&&r&&r<this.minLength&&(t.minLengthError={given:r,minLength:this.minLength},i=!1),this.maxLength&&r>this.maxLength&&(t.maxLengthError={given:r,maxLength:this.maxLength},i=!1),this.required&&!r&&m&&(t.requiredError={empty:!0},i=!1),i?null:t}addQuillEventListeners(){this.dispose(),this.zone.runOutsideAngular(()=>{this.subscription=new Ie.w0,this.subscription.add((0,O.R)(this.quillEditor,"selection-change").subscribe(([n,r,l])=>{this.selectionChangeHandler(n,r,l)}));let t=(0,O.R)(this.quillEditor,"text-change"),i=(0,O.R)(this.quillEditor,"editor-change");"number"==typeof this.debounceTime&&(t=t.pipe((0,R.b)(this.debounceTime)),i=i.pipe((0,R.b)(this.debounceTime))),this.subscription.add(t.subscribe(([n,r,l])=>{this.textChangeHandler(n,r,l)})),this.subscription.add(i.subscribe(([n,r,l,m])=>{this.editorChangeHandler(n,r,l,m)}))})}dispose(){null!==this.subscription&&(this.subscription.unsubscribe(),this.subscription=null)}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(e.zs3),e.Y36(e.SBq),e.Y36(e.sBO),e.Y36(H.H7),e.Y36(e.Lbi),e.Y36(e.Qsj),e.Y36(e.R0b),e.Y36($))},o.\u0275dir=e.lG2({type:o,inputs:{format:"format",theme:"theme",modules:"modules",debug:"debug",readOnly:"readOnly",placeholder:"placeholder",maxLength:"maxLength",minLength:"minLength",required:"required",formats:"formats",customToolbarPosition:"customToolbarPosition",sanitize:"sanitize",styles:"styles",strict:"strict",scrollingContainer:"scrollingContainer",bounds:"bounds",customOptions:"customOptions",customModules:"customModules",trackChanges:"trackChanges",preserveWhitespace:"preserveWhitespace",classes:"classes",trimOnValidation:"trimOnValidation",linkPlaceholder:"linkPlaceholder",compareValues:"compareValues",filterNull:"filterNull",debounceTime:"debounceTime",defaultEmptyValue:"defaultEmptyValue",valueGetter:"valueGetter",valueSetter:"valueSetter"},outputs:{onEditorCreated:"onEditorCreated",onEditorChanged:"onEditorChanged",onContentChanged:"onContentChanged",onSelectionChanged:"onSelectionChanged",onFocus:"onFocus",onBlur:"onBlur"},features:[e.TTD]}),o})(),B=(()=>{class o extends Be{constructor(t,i,n,r,l,m,_,v){super(t,i,n,r,l,m,_,v)}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(e.zs3),e.Y36(e.SBq),e.Y36(e.sBO),e.Y36(H.H7),e.Y36(e.Lbi),e.Y36(e.Qsj),e.Y36(e.R0b),e.Y36($))},o.\u0275cmp=e.Xpm({type:o,selectors:[["quill-editor"]],features:[e._Bn([{multi:!0,provide:a.JU,useExisting:(0,e.Gpc)(()=>o)},{multi:!0,provide:a.Cf,useExisting:(0,e.Gpc)(()=>o)}]),e.qOj],ngContentSelectors:$e,decls:3,vars:2,consts:[[4,"ngIf"],["quill-editor-element","",4,"ngIf"],["quill-editor-element",""]],template:function(t,i){1&t&&(e.F$t(Ke),e.YNc(0,je,3,2,"ng-container",0),e.Hsn(1),e.YNc(2,Re,3,2,"ng-container",0)),2&t&&(e.Q6J("ngIf","top"!==i.toolbarPosition),e.xp6(2),e.Q6J("ngIf","top"===i.toolbarPosition))},dependencies:[u.O5],styles:[":host{display:inline-block}\n"],encapsulation:2}),o})(),Xe=(()=>{class o{static forRoot(t){return{ngModule:o,providers:[{provide:K,useValue:t}]}}}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[u.ez]}),o})();var We=g(9092);const et=["editor"],X=function(){return{height:"100px"}};function tt(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"div",28)(1,"div",29)(2,"button",30),e.NdJ("click",function(){const r=e.CHM(t).index,l=e.oxw();return e.KtG(l.removeAnswer(r))}),e.qZA()(),e.TgZ(3,"div",12)(4,"div",31)(5,"div",32)(6,"div",4)(7,"span",5),e._uU(8,"Respuesta"),e.qZA()(),e.TgZ(9,"input",33),e.NdJ("ngModelChange",function(n){const l=e.CHM(t).$implicit;return e.KtG(l.respuesta=n)}),e.qZA()()(),e.TgZ(10,"div",34)(11,"div",35)(12,"input",36),e.NdJ("ngModelChange",function(n){const l=e.CHM(t).$implicit;return e.KtG(l.isCorrecta=n)}),e.qZA(),e.TgZ(13,"label",37),e._uU(14,"Correcta"),e.qZA(),e.TgZ(15,"input",38),e.NdJ("ngModelChange",function(n){const l=e.CHM(t).$implicit;return e.KtG(l.isCorrecta=n)}),e.qZA(),e.TgZ(16,"label",37),e._uU(17,"Incorrecta"),e.qZA()()()(),e.TgZ(18,"div",7)(19,"label",8),e._uU(20,"Retroalimentacion"),e.qZA(),e.TgZ(21,"div",9)(22,"quill-editor",39),e.NdJ("onEditorCreated",function(n){const l=e.CHM(t).$implicit,m=e.oxw();return e.KtG(m.createQuill(n,l))})("onEditorChanged",function(n){const l=e.CHM(t).$implicit,m=e.oxw();return e.KtG(m.quillAnsewerChange(n,l))}),e.qZA()()()()}if(2&o){const t=s.$implicit,i=s.index,n=e.oxw();e.xp6(9),e.Q6J("ngModel",t.respuesta),e.xp6(3),e.Q6J("name","btnradio"+n.indexQuestion+i)("ngModel",t.isCorrecta)("value",!0)("id","correcta"+n.indexQuestion+i),e.xp6(1),e.Q6J("for","correcta"+n.indexQuestion+i),e.xp6(2),e.Q6J("name","btnradio"+n.indexQuestion+i)("ngModel",t.isCorrecta)("value",!1)("id","incorrecta"+n.indexQuestion+i),e.xp6(1),e.Q6J("for","incorrecta"+n.indexQuestion+i),e.xp6(6),e.Q6J("styles",e.DdM(12,X))}}const it=function(){return{height:"150px"}},ot=function(o){return{show:o}};let nt=(()=>{class o{constructor(){this.remove=new e.vpe,this.question={orden:0,pregunta:"",resumen:"",bibliografia:"",imagen:"",subrayadoInicio:0,subrayadoFin:0,answers:[{respuesta:"",retroalimentacion:"",isCorrecta:!1}]},this.showError=""}set setQuestion(t){t&&(this.question=t)}ngOnInit(){this.question.orden=this.indexQuestion}createQuill(t,i){i.retroalimentacion&&t.clipboard.dangerouslyPasteHTML(0,C(i.retroalimentacion,!1))}createQuillDescirption(t){this.question.resumen&&t.clipboard.dangerouslyPasteHTML(0,C(this.question.resumen,!1))}createQuillBiblio(t){this.question.bibliografia&&t.clipboard.dangerouslyPasteHTML(0,C(this.question.bibliografia,!1))}getImage(t,i){const n=t.target.files;if(n.length>0){const[r]=n,l=new FileReader;l.onload=()=>{i.image=l.result},l.readAsDataURL(r)}}quillChange(t,i){t.html&&(this.question[i]=C(t.html))}addAnswer(){this.question.answers.push({respuesta:"",retroalimentacion:"",isCorrecta:!1})}removeAnswer(t){this.showError="",this.question.answers.length>1?this.question.answers.splice(t,1):this.showError="No puedes eliminar todas las respuestas"}quillAnsewerChange(t,i){t.html&&(i.retroalimentacion=C(t.html))}}return o.\u0275fac=function(t){return new(t||o)},o.\u0275cmp=e.Xpm({type:o,selectors:[["enarm-admin-question"]],viewQuery:function(t,i){if(1&t&&e.Gf(et,5),2&t){let n;e.iGM(n=e.CRH())&&(i.editor=n.first)}},inputs:{setQuestion:["question","setQuestion"],indexQuestion:["index","indexQuestion"]},outputs:{remove:"remove"},decls:38,vars:13,consts:[[1,"p-2","m-1","rounded","shadow-lg"],[1,"float-end",3,"click"],[1,"btn","btn-close"],[1,"input-group","mt-10","mb-3"],[1,"input-group-prepend"],["id","basic-addon1",1,"input-group-text"],["type","text","name","question","placeholder","Pregunta","aria-label","Username","aria-describedby","basic-addon1",1,"form-control",3,"ngModel","ngModelChange"],[1,"mt-15"],["for","descripcion"],[1,"mt-5"],["placeholder","ingresa aqui la descripcion",3,"styles","onEditorCreated","onEditorChanged"],["editor",""],[1,"row"],[1,"col"],[1,"mb-4","d-flex","justify-content-center"],["alt","example placeholder",2,"width","300px","height","200px","object-fit","contain",3,"src"],[1,"d-flex","justify-content-center"],[1,"btn","btn-primary","btn-rounded"],[1,"form-label","text-white","m-1",3,"for"],["type","file","accept","image/png, image/gif, image/jpeg",1,"form-control","d-none",3,"id","change"],["placeholder","ingresa aqui la bibiliografia y referencias",3,"styles","onEditorCreated","onEditorChanged"],["biblio",""],[1,"mt-18","mb-25"],[1,"btn","btn-success",3,"click"],["class","p-2 m-2 rounded shadow-lg",4,"ngFor","ngForOf"],["role","alert","aria-live","assertive","aria-atomic","true",1,"toast","align-items-center","text-white","bg-danger","border-0",2,"position","fixed","top","9%",3,"ngClass"],[1,"d-flex"],[1,"toast-body"],[1,"p-2","m-2","rounded","shadow-lg"],[1,"float-end"],[1,"btn","btn-close",3,"click"],[1,"col-8"],[1,"input-group","mt-5"],["type","text","placeholder","Escribe la repuesta","aria-label","Username","aria-describedby","basic-addon1",1,"form-control",3,"ngModel","ngModelChange"],[1,"col","mt-5"],["role","group","aria-label","Basic radio toggle button group",1,"btn-group"],["type","radio","autocomplete","off","checked","",1,"btn-check",3,"name","ngModel","value","id","ngModelChange"],[1,"btn","btn-outline-primary",3,"for"],["type","radio","autocomplete","off",1,"btn-check",3,"name","ngModel","value","id","ngModelChange"],["placeholder","ingresa aqui la retroalimentacion",3,"styles","onEditorCreated","onEditorChanged"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"div",1),e.NdJ("click",function(){return i.remove.emit()}),e._UZ(2,"button",2),e.qZA(),e.TgZ(3,"div",3)(4,"div",4)(5,"span",5),e._uU(6,"Pregunta"),e.qZA()(),e.TgZ(7,"input",6),e.NdJ("ngModelChange",function(r){return i.question.pregunta=r}),e.qZA()(),e.TgZ(8,"div",7)(9,"label",8),e._uU(10,"Descripcion de la pregunta"),e.qZA(),e.TgZ(11,"div",9)(12,"quill-editor",10,11),e.NdJ("onEditorCreated",function(r){return i.createQuillDescirption(r)})("onEditorChanged",function(r){return i.quillChange(r,"resumen")}),e.qZA()()(),e.TgZ(14,"div",7)(15,"div",12)(16,"div",13)(17,"div",14),e._UZ(18,"img",15),e.qZA(),e.TgZ(19,"div",16)(20,"div",17)(21,"label",18),e._uU(22,"Elige imagen"),e.qZA(),e.TgZ(23,"input",19),e.NdJ("change",function(r){return i.getImage(r,i.question)}),e.qZA()()()(),e.TgZ(24,"div",13)(25,"label",8),e._uU(26,"Bibliografia"),e.qZA(),e.TgZ(27,"div",9)(28,"quill-editor",20,21),e.NdJ("onEditorCreated",function(r){return i.createQuillBiblio(r)})("onEditorChanged",function(r){return i.quillChange(r,"bibliografia")}),e.qZA()()()()(),e.TgZ(30,"div",22)(31,"button",23),e.NdJ("click",function(){return i.addAnswer()}),e._uU(32,"A\xf1adir Respuesta"),e.qZA(),e.YNc(33,tt,23,13,"div",24),e.qZA()(),e.TgZ(34,"div",25)(35,"div",26)(36,"div",27),e._uU(37),e.qZA()()()),2&t&&(e.xp6(7),e.Q6J("ngModel",i.question.pregunta),e.xp6(5),e.Q6J("styles",e.DdM(9,it)),e.xp6(6),e.Q6J("src",i.question.imagen?i.question.imagen:"https://mdbootstrap.com/img/Photos/Others/placeholder.jpg",e.LSH),e.xp6(3),e.Q6J("for","customFile2"+i.indexQuestion),e.xp6(2),e.Q6J("id","customFile2"+i.indexQuestion),e.xp6(5),e.Q6J("styles",e.DdM(10,X)),e.xp6(5),e.Q6J("ngForOf",i.question.answers),e.xp6(1),e.Q6J("ngClass",e.VKq(11,ot,0!==i.showError.length)),e.xp6(3),e.hij(" ",i.showError," "))},dependencies:[u.mk,u.sg,a.Fj,a._,a.JJ,a.On,B],encapsulation:2}),o})();const rt=["editor"];function st(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"div",8)(1,"label",19),e._uU(2,"Selecciona la categoria"),e.qZA(),e.TgZ(3,"enarm-select",39),e.NdJ("onSelected",function(n){e.CHM(t);const r=e.oxw();return e.KtG(r.clinicCase.category=n)}),e.qZA()()}if(2&o){const t=e.oxw();e.xp6(3),e.Q6J("setitems",t.categories)("multiple",!1)}}function at(o,s){1&o&&e._UZ(0,"hr",42)}function lt(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"div"),e.YNc(1,at,1,0,"hr",40),e.TgZ(2,"enarm-admin-question",41),e.NdJ("remove",function(){const r=e.CHM(t).index,l=e.oxw();return e.KtG(l.removeQuestion(r))}),e.qZA()()}if(2&o){const t=s.$implicit,i=s.index,n=s.first;e.xp6(1),e.Q6J("ngIf",!n),e.xp6(1),e.Q6J("index",i)("question",t)}}const ut=function(){return{height:"200px"}},W=function(o){return{show:o}};let ee=(()=>{class o{constructor(t,i,n,r){this.adminService=t,this.router=i,this.quesitonService=n,this.route=r,this.isEdditing=!1,this.clinicCase={name:"",category:{categoria:"",id:0,value:"",Nombre:"",fkid_categoria:0},image:"",lenguague:"es",resume:"",questions:[{orden:0,pregunta:"",resumen:"",bibliografia:"",imagen:"",subrayadoInicio:0,subrayadoFin:0,answers:[{respuesta:"",retroalimentacion:"",isCorrecta:!1}]}]},this.categories=[],this.showError="",this.succesMessage=""}ngOnInit(){this.getConfigurations(),this.route.paramMap.subscribe(t=>{const i=t.get("id");i&&(this.isEdditing=!0,this.id=Number(i),this.getQuestion())})}getQuestion(){this.quesitonService.getQuestion(this.id).then(t=>{this.clinicCase.name=t.nombre,this.clinicCase.category=t.subcategoria,this.clinicCase.image=t.imagen,this.clinicCase.lenguague=t.isEspanol?"es":"en",this.clinicCase.resume=C(t.descripcion,!1),this.editor.writeValue(this.clinicCase.resume),this.clinicCase.questions=t.questions,this.id=t.id})}reviewClinickImage(t,i){const n=t.target.files;if(n.length>0){const[r]=n,l=new FileReader;l.onload=()=>{i.image=l.result},l.readAsDataURL(r)}}quillChange(t,i){t.html&&(i.resume=C(t.html))}getConfigurations(){var t=this;return(0,c.Z)(function*(){const i=yield t.adminService.getCategories();for(const n of i)for(const r of n.subcategoria)r.value=r.Nombre,t.categories.push(r)})()}addQuestion(){this.clinicCase.questions.push({orden:0,pregunta:"",resumen:"",bibliografia:"",imagen:"",subrayadoInicio:0,subrayadoFin:0,answers:[{respuesta:"",retroalimentacion:"",isCorrecta:!1}]})}removeQuestion(t){this.clinicCase.questions.length>1?this.clinicCase.questions.splice(t,1):this.showError="No puedes eliminar todas las preguntas"}save(){var t=this;return(0,c.Z)(function*(){if(t.showError="",""===t.clinicCase.name||""===t.clinicCase.category.Nombre||""===t.clinicCase.resume)return void(t.showError="Los campos Nombre, categoria y/o resumen son requeridos");let i=!1;for(const r of t.clinicCase.questions){(""===r.name||""===r.resume)&&(i=!0);for(const l of r.answers)(""===l.name||""===l.resume)&&(i=!0)}if(i)return void(t.showError="Alguno de los campos de las preugntas y/o respuestas estan vacios");console.log("clicnic",t.clinicCase),console.log("error",i);const n=[{idSubcategoria:t.clinicCase.category.id,nombre:t.clinicCase.name,descipcion:t.clinicCase.resume,imagen:t.clinicCase.image||"",isEspanol:"es"===t.clinicCase.lenguague,preguntas:t.clinicCase.questions}];try{(yield t.quesitonService.addClinicalCase(n))&&(t.succesMessage="Se ha guardado correctamente",t.router.navigateByUrl("/admin/questions"))}catch(r){t.showError="Ocurrio un error al guardar",console.log("error",r)}})()}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(A),e.Y36(y.F0),e.Y36(G),e.Y36(y.gz))},o.\u0275cmp=e.Xpm({type:o,selectors:[["ng-component"]],viewQuery:function(t,i){if(1&t&&e.Gf(rt,5),2&t){let n;e.iGM(n=e.CRH())&&(i.editor=n.first)}},decls:62,vars:16,consts:[[1,"navbar","navbar-dark","bg-dark","p-lg-3",2,"position","fixed","width","100%","top","0%","z-index","99"],[1,"navbar-brand","pl-4",2,"cursor","pointer",3,"click"],["name","arrow-return-left","width","30","height","30"],[2,"height","80px"],[1,"p-4","m-5","border-4","shadow-lg"],[1,"w-100","float-start"],[1,"row"],[1,"col-lg","p-0","mb-20"],[1,"form-group"],["for","case_name"],["type","text","name","name","id","case_name","aria-describedby","clinicCaseHelp","placeholder","agrega el nombre",1,"form-control","mt-5",2,"height","45px",3,"ngModel","ngModelChange"],[1,"col-lg"],["class","form-group",4,"ngIf"],[1,"mb-4","d-flex","justify-content-center"],["alt","example placeholder",2,"width","300px","height","200px","object-fit","contain",3,"src"],[1,"d-flex","justify-content-center"],[1,"btn","btn-primary","btn-rounded"],["for","customFile1",1,"form-label","text-white","m-1"],["type","file","name","image","accept","image/png, image/gif, image/jpeg","id","customFile1",1,"form-control","d-none",3,"change"],["for","case_category"],["role","group","aria-label","Basic radio toggle button group",1,"btn-group"],["type","radio","name","btnradioLen","id","radioEsp","value","es","autocomplete","off","checked","",1,"btn-check",3,"ngModel","ngModelChange"],["for","radioEsp",1,"btn","btn-outline-primary"],["type","radio","name","btnradioLen","id","radioEng","value","en","autocomplete","off",1,"btn-check",3,"ngModel","ngModelChange"],["for","radioEng",1,"btn","btn-outline-primary"],[1,"mt-30"],["for","descripcion"],[1,"mt-5"],["placeholder","ingresa aqui la descripcion",3,"styles","onEditorChanged"],["editor",""],[1,"mt-18","mb-25"],[1,"btn","btn-success",3,"click"],[4,"ngFor","ngForOf"],[1,"btn","btn-primary",3,"click"],["role","alert","aria-live","assertive","aria-atomic","true",1,"toast","align-items-center","text-white","bg-danger","border-0",2,"position","fixed","top","9%",3,"ngClass"],[1,"d-flex"],[1,"toast-body"],["type","button","data-bs-dismiss","toast","aria-label","Close",1,"btn-close","btn-close-white","me-2","m-auto",3,"click"],["role","alert","aria-live","assertive","aria-atomic","true",1,"toast","align-items-center","text-white","bg-success","border-0",2,"position","fixed","top","9%",3,"ngClass"],["id","case_category",3,"setitems","multiple","onSelected"],["class","border border-info border-2 opacity-50",4,"ngIf"],[3,"index","question","remove"],[1,"border","border-info","border-2","opacity-50"]],template:function(t,i){1&t&&(e.TgZ(0,"body")(1,"nav",0)(2,"a",1),e.NdJ("click",function(){return i.router.navigateByUrl("/admin/questions")}),e._UZ(3,"i-bs",2),e._uU(4," Regresar "),e.qZA()(),e._UZ(5,"div",3),e.TgZ(6,"div",4)(7,"h4"),e._uU(8,"Agregar casos clinicos"),e.qZA(),e.TgZ(9,"form")(10,"div",5)(11,"div",6)(12,"div",7)(13,"div",8)(14,"label",9),e._uU(15,"Nombre del caso clinico"),e.qZA(),e.TgZ(16,"input",10),e.NdJ("ngModelChange",function(r){return i.clinicCase.name=r}),e.qZA()()(),e.TgZ(17,"div",11),e.YNc(18,st,4,2,"div",12),e.qZA()(),e.TgZ(19,"div",6)(20,"div",11)(21,"div")(22,"div",13),e._UZ(23,"img",14),e.qZA(),e.TgZ(24,"div",15)(25,"div",16)(26,"label",17),e._uU(27,"Selecciona archivo"),e.qZA(),e.TgZ(28,"input",18),e.NdJ("change",function(r){return i.reviewClinickImage(r,i.clinicCase)}),e.qZA()()()()(),e.TgZ(29,"div",11)(30,"h6",19),e._uU(31,"Idioma del caso clinico"),e._UZ(32,"br"),e.qZA(),e.TgZ(33,"div",20)(34,"input",21),e.NdJ("ngModelChange",function(r){return i.clinicCase.lenguague=r}),e.qZA(),e.TgZ(35,"label",22),e._uU(36,"Espa\xf1ol"),e.qZA(),e.TgZ(37,"input",23),e.NdJ("ngModelChange",function(r){return i.clinicCase.lenguague=r}),e.qZA(),e.TgZ(38,"label",24),e._uU(39,"Ingles"),e.qZA()()()()(),e.TgZ(40,"div",25)(41,"label",26),e._uU(42,"Descripcion del Caso Clinico"),e.qZA(),e.TgZ(43,"div",27)(44,"quill-editor",28,29),e.NdJ("onEditorChanged",function(r){return i.quillChange(r,i.clinicCase)}),e.qZA()()(),e.TgZ(46,"div",30)(47,"button",31),e.NdJ("click",function(){return i.addQuestion()}),e._uU(48,"A\xf1adir Pregunta"),e.qZA(),e.YNc(49,lt,3,3,"div",32),e.qZA(),e.TgZ(50,"button",33),e.NdJ("click",function(){return i.save()}),e._uU(51,"Guardar caso clinico"),e.qZA()()()(),e.TgZ(52,"div",34)(53,"div",35)(54,"div",36),e._uU(55),e.qZA(),e.TgZ(56,"button",37),e.NdJ("click",function(){return i.showError=""}),e.qZA()()(),e.TgZ(57,"div",38)(58,"div",35)(59,"div",36),e._uU(60),e.qZA(),e.TgZ(61,"button",37),e.NdJ("click",function(){return i.succesMessage=""}),e.qZA()()()),2&t&&(e.xp6(16),e.Q6J("ngModel",i.clinicCase.name),e.xp6(2),e.Q6J("ngIf",i.categories.length>0),e.xp6(5),e.Q6J("src",i.clinicCase.image?i.clinicCase.image:"https://mdbootstrap.com/img/Photos/Others/placeholder.jpg",e.LSH),e.xp6(11),e.Q6J("ngModel",i.clinicCase.lenguague),e.xp6(3),e.Q6J("ngModel",i.clinicCase.lenguague),e.xp6(7),e.Q6J("styles",e.DdM(11,ut)),e.xp6(5),e.Q6J("ngForOf",i.clinicCase.questions),e.xp6(3),e.Q6J("ngClass",e.VKq(12,W,0!==i.showError.length)),e.xp6(3),e.hij(" ",i.showError," "),e.xp6(2),e.Q6J("ngClass",e.VKq(14,W,0!==i.succesMessage.length)),e.xp6(3),e.hij(" ",i.succesMessage," "))},dependencies:[u.mk,u.sg,u.O5,a._Y,a.Fj,a._,a.JJ,a.JL,a.On,a.F,B,E.gZH,We.H,nt]}),o})();const dt=[{path:"",component:he},{path:"subscripciones",component:Qe},{path:"configurations",component:ve},{path:"questions",children:[{path:"",component:ke},{path:"add",component:ee},{path:"edit/:id",component:ee}]},{path:"laboratory",component:Ae},{path:"categories",component:Ne}];let ct=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[y.Bz.forChild(dt),y.Bz]}),o})();var mt=g(4466);let pt=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[u.ez,ct,a.u5,a.UX,M.JF,Xe.forRoot(),E.o7e.pick(E.kEt),mt.m]}),o})()}}]);